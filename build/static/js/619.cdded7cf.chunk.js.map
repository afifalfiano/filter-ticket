{"version":3,"file":"static/js/619.cdded7cf.chunk.js","mappings":"8TACA,EAAmC,uC,4CC6QnC,MAjQA,YAAwD,IAAhCA,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,OACrCC,EAAgB,CACpBC,SAAe,OAANF,QAAM,IAANA,OAAA,EAAAA,EAAQE,UAAW,GAC5BC,QAAc,OAANH,QAAM,IAANA,OAAA,EAAAA,EAAQG,SAAU,GAC1BC,WAAiB,OAANJ,QAAM,IAANA,OAAA,EAAAA,EAAQI,YAAa,GAChCC,gBAAsB,OAANL,QAAM,IAANA,OAAA,EAAAA,EAAQK,eAAeC,MAAM,KAAK,KAAM,GACxDC,kBAAwB,OAANP,QAAM,IAANA,OAAA,EAAAA,EAAQO,iBAAiBD,MAAM,KAAK,KAAM,GAC5DE,aAAmB,OAANR,QAAM,IAANA,OAAA,EAAAA,EAAQQ,cAAe,GACpCC,QAAc,OAANT,QAAM,IAANA,OAAA,EAAAA,EAAQS,SAAU,GAC1BC,SAAgB,IAIZC,GAAWC,EAAAA,EAAAA,MAEXC,EAAa,SAACC,GAClB,IAAMC,GAAQ,kBACTjB,GADS,IAEZkB,KAAI,kBAAMlB,EAAWkB,KAAlB,IAAuBC,wBAAwB,EAAOC,2BAA2B,MAEtFP,GAASQ,EAAAA,EAAAA,IAASJ,GACnB,EAEaK,GAASC,EAAAA,EAAAA,IAAYC,EAAAA,IAA3BC,KAER,GAAyBC,EAAAA,EAAAA,MAAlBC,GAAP,eACA,GAA4BC,EAAAA,EAAAA,MAArBC,GAAP,eAEMC,EAAY,yCAAG,WAAOC,EAASC,GAAhB,oFACbC,EAAQ,IAAIC,KAAKH,EAAQxB,gBACzB4B,EAAM,IAAID,KAAKH,EAAQtB,kBACvB2B,EAHa,UAGIH,EAAMI,cAHV,YAGkE,IAAvCJ,EAAMK,WAAWC,WAAWC,OAA5B,WAA+CP,EAAMK,WAAa,GAAML,EAAMK,WAAa,EAHtH,YAGiK,IAAtCL,EAAMQ,UAAUF,WAAWC,OAA3B,WAA8CP,EAAMQ,WAAcR,EAAMQ,UAHnM,iBAIbC,EAJa,UAIEP,EAAIE,cAJN,YAI4D,IAArCF,EAAIG,WAAWC,WAAWC,OAA1B,WAA6CL,EAAIG,WAAa,GAAMH,EAAIG,WAAa,EAJ5G,YAIqJ,IAApCH,EAAIM,UAAUF,WAAWC,OAAzB,WAA4CL,EAAIM,WAAcN,EAAIM,UAJnL,iBAKbE,EAAO,CACXjC,YAAaqB,EAAQrB,YACrBH,eAAgB6B,EAChB3B,iBAAkBiC,EAClBtC,QAAS2B,EAAQ3B,QACjBC,OAAQ0B,EAAQ1B,OAChBM,OAAQoB,EAAQpB,OAChBL,UAAWyB,EAAQzB,UACnBsC,OAAQb,EAAQa,OAChBC,QAASvB,EAAKwB,SAEhB,IAEiB,OAAX5C,EACF6C,EAASJ,EAAMX,GAGfgB,EAASL,EAIZ,CAFC,MAAOM,IACPC,EAAAA,EAAAA,GAAWD,GAAO,EACnB,CA1BkB,2CAAH,wDA6BZF,EAAQ,yCAAG,WAAOJ,EAAMX,GAAb,4FACGL,GAAe,UAAKgB,IADvB,OAES,aADlBQ,EADS,QAEP1B,KAAKd,QAA4C,YAApBwC,EAAI1B,KAAKd,SAC5CyC,EAAAA,EAAAA,GAAeD,GACfE,YAAW,WACTrB,IACAjB,IACAd,EAAQ,CAAEU,OAAQ,WACnB,GAAE,OAEHuC,EAAAA,EAAAA,GAAWC,GAAK,GAVH,2CAAH,wDAcRH,EAAQ,yCAAG,WAAOL,GAAP,4FACMd,EAAkB,CACrCyB,GAAIpD,EAAOqD,gBACXZ,MAAK,UAAMA,KAHE,OAKY,aAJrBa,EADS,QAKJ/B,KAAKd,QAA+C,YAAvB6C,EAAO/B,KAAKd,SAClDyC,EAAAA,EAAAA,GAAeI,GACfH,YAAW,WACTpD,EAAQ,CAAEU,OAAQ,YAClBI,GACD,GAAE,OAEHmC,EAAAA,EAAAA,GAAWM,GAAQ,GAZN,2CAAH,sDAgBd,OACE,gBAAKC,UAAU,2GAAf,UACE,iBAAKA,UAAS,oCAA+BC,GAA7C,WACE,SAAC,KAAD,CAAgBC,QAAS5C,KACzB,eAAI0C,UAAU,oBAAd,SAA8C,OAAXvD,EAAmB,oCAAwC,qCAC9F,eAAIuD,UAAU,UAEd,SAAC,KAAD,CACEG,oBAAkB,EAClBC,iBAAkBC,EAAAA,GAClB3D,cAAeA,EACf4D,SAAU,SAACC,EAAD,GAA4B,IAAjBhC,EAAgB,EAAhBA,UACnBF,EAAakC,EAAQhC,EACtB,EANH,SAQG,gBACCgC,EADD,EACCA,OACAC,EAFD,EAECA,OACAC,EAHD,EAGCA,QACAC,EAJD,EAICA,QACAC,EALD,EAKCA,aACAC,EAND,EAMCA,WAND,OAQC,UAAC,KAAD,YACE,iBAAKZ,UAAU,eAAf,WACE,kBAAOa,QAAQ,UAAUb,UAAU,QAAnC,UACE,iBAAMA,UAAU,aAAhB,0BAGF,SAAC,KAAD,CACEH,GAAG,UACHiB,KAAK,UACLC,YAAY,UACZC,MAAOT,EAAO5D,QACdsE,UAAU,WACVC,OAAQN,EACRO,SAAUR,EACVX,UAAU,oCAEXQ,EAAO7D,SAAW8D,EAAQ9D,UAAW,SAAC,KAAD,CAAU6D,OAAQA,EAAO7D,cAGjE,iBAAKqD,UAAU,eAAf,WACE,kBAAOa,QAAQ,SAASb,UAAU,QAAlC,UACE,iBAAMA,UAAU,aAAhB,uBAGF,SAAC,KAAD,CACEH,GAAG,SACHiB,KAAK,SACLC,YAAY,OACZC,MAAOT,EAAO3D,OACdqE,UAAU,WACVC,OAAQN,EACRO,SAAUR,EACVX,UAAU,oCAEXQ,EAAO5D,QAAU6D,EAAQ7D,SAAU,SAAC,KAAD,CAAU4D,OAAQA,EAAO5D,aAG/D,iBAAKoD,UAAU,eAAf,WACE,kBAAOa,QAAQ,YAAYb,UAAU,QAArC,UACE,iBAAMA,UAAU,aAAhB,4BAGF,SAAC,KAAD,CACEH,GAAG,YACHiB,KAAK,YACLC,YAAY,YACZC,MAAOT,EAAO1D,UACdoE,UAAU,WACVC,OAAQN,EACRO,SAAUR,EACVX,UAAU,oCAEXQ,EAAO3D,WAAa4D,EAAQ5D,YAAa,SAAC,KAAD,CAAU2D,OAAQA,EAAO3D,gBAGrE,iBAAKmD,UAAU,kCAAf,WACE,iBAAKA,UAAU,sBAAf,WACE,kBAAOa,QAAQ,iBAAiBb,UAAU,QAA1C,UACE,iBAAMA,UAAU,aAAhB,sCAGF,SAAC,KAAD,CACEH,GAAG,iBACHiB,KAAK,iBACLC,YAAY,GACZC,MAAOT,EAAOzD,eACdsE,KAAK,OACLF,OAAQN,EACRO,SAAUR,EACVX,UAAU,8CAEXQ,EAAO1D,gBAAkB2D,EAAQ3D,iBAAkB,SAAC,KAAD,CAAU0D,OAAQA,EAAO1D,qBAI/E,iBAAKkD,UAAU,sBAAf,WACE,kBAAOa,QAAQ,mBAAmBb,UAAU,QAA5C,UACE,iBAAMA,UAAU,aAAhB,wCAGF,SAAC,KAAD,CACEH,GAAG,mBACHiB,KAAK,mBACLC,YAAY,GACZC,MAAOT,EAAOvD,iBACdoE,KAAK,OACLF,OAAQN,EACRO,SAAUR,EACVX,UAAU,8CAEXQ,EAAOxD,kBAAoByD,EAAQzD,mBAAoB,SAAC,KAAD,CAAUwD,OAAQA,EAAOxD,0BAIrF,iBAAKgD,UAAU,kCAAf,WACE,iBAAKA,UAAU,sBAAf,WACE,kBAAOa,QAAQ,cAAcb,UAAU,QAAvC,UACE,iBAAMA,UAAU,aAAhB,4CAGF,SAAC,KAAD,CACEH,GAAG,cACHiB,KAAK,cACLC,YAAY,GACZC,MAAOT,EAAOtD,YACdmE,KAAK,OACLF,OAAQN,EACRO,SAAUR,EACVX,UAAU,kDAId,iBAAKA,UAAU,sBAAf,WACE,kBAAOa,QAAQ,WAAWb,UAAU,QAApC,UACE,iBAAMA,UAAU,aAAhB,wBAEF,UAAC,KAAD,CACEiB,UAAU,SACVpB,GAAG,SACHiB,KAAK,SACLE,MAAOT,EAAOrD,OACdgE,OAAQN,EACRO,SAAUR,EACVX,UAAU,0CAPZ,WAUE,mBAAQgB,MAAM,GAAGK,MAAM,eAAeC,aAAc,GAApD,2BACA,mBAAQN,MAAM,OAAOK,MAAM,OAA3B,mBACA,mBAAQL,MAAM,SAASK,MAAM,SAA7B,uBAEDb,EAAOtD,QAAUuD,EAAQvD,SAAU,SAAC,KAAD,CAAUsD,OAAQA,EAAOtD,gBAIjE,eAAI8C,UAAU,eACd,iBAAKA,UAAU,8BAAf,WACE,SAAC,KAAD,CAAQoB,KAAK,SAASpB,UAAU,OAAOE,QAAS,kBAAM5C,GAAN,EAAhD,oBACA,SAAC,KAAD,CAAQ8D,KAAK,SAASG,UAAWb,EAASV,UAAU,cAApD,yBAjJL,QAyJV,EC3PKwB,EAAU,CACd,KACA,QACA,iBACA,SACA,UACA,aACA,aACA,QAkMF,MA9LA,WAAmC,IAAD,MAC1BC,GAAWC,EAAAA,EAAAA,MACjB,GAAwBC,EAAAA,EAAAA,UAAS,IAAjC,eAAOC,EAAP,KAAaC,EAAb,KACMzE,GAAWC,EAAAA,EAAAA,MACjB,GAAqCyE,EAAAA,EAAAA,MAArC,eAAOC,EAAP,KAAsBC,EAAtB,KAAsBA,UAChBzF,GAAauB,EAAAA,EAAAA,IAAYmE,EAAAA,IACzBC,GAAUpE,EAAAA,EAAAA,IAAYqE,EAAAA,IAC5B,GAA4BR,EAAAA,EAAAA,UAAS,IAArC,eAAOS,EAAP,KAAeC,EAAf,KACA,GAA4BV,EAAAA,EAAAA,UAAS,MAArC,eAAOlF,EAAP,KAAe6F,EAAf,KACA,GAAsCX,EAAAA,EAAAA,UAAS,GAA/C,eAAOY,EAAP,KAAoBC,EAApB,KACA,GAA8Bb,EAAAA,EAAAA,UAAS,CAAC,IAAxC,eAAOc,EAAP,KAAgBC,EAAhB,KACA,GAAkCf,EAAAA,EAAAA,UAAS,CAAC,IAA5C,eAAOgB,EAAP,KAAkBC,EAAlB,KAEMC,EAAY,SAACC,GACjB,IAAItF,EACU,qBAAVsF,EACFtF,GAAQ,kBAAQjB,GAAR,IAAoBkB,KAAI,kBAAMlB,EAAWkB,KAAlB,IAAuBC,wBAAwB,MAC3D,wBAAVoF,EACTtF,GAAQ,kBAAQjB,GAAR,IAAoBkB,KAAI,kBAAMlB,EAAWkB,KAAlB,IAAuBE,2BAA2B,MAC9D,wBAAVmF,IACTtF,GAAQ,kBAAQjB,GAAR,IAAoBkB,KAAI,kBAAMlB,EAAWkB,KAAlB,IAAuBsF,2BAA2B,OAEnF3F,GAASQ,EAAAA,EAAAA,IAASJ,IAClBwF,OAAOC,SAAS,EAAG,EACpB,EAEKC,EAAc,yCAAG,sHAAOC,EAAP,+BAAc,EAC7BC,EADe,gBACED,GADF,kBAGApB,EAAYqB,GAAOC,SAHnB,OAInB,GAAoB,aADdrF,EAHa,QAIVd,QAAwC,YAAhBc,EAAKd,OAAsB,CAQ1D,IAPMoG,EAAStF,EAAKA,KAAKA,KACzBZ,GAASmG,EAAAA,EAAAA,IAAY,CAAEvF,KAAMsF,KAC7BzB,EAAQyB,GACRd,EAAexE,EAAKA,KAAKwF,cACzBd,EAAW,CAAC1E,EAAKA,KAAKyF,WAEhBC,EAAgB,GACbC,EAAI,EAAGA,EAAI3F,EAAKA,KAAK4F,UAAWD,IACvCD,EAAcG,KAAKF,EAAI,GAEzBf,EAAac,EACd,MACC7B,EAAQ,KACRpC,EAAAA,EAAAA,GAAWzB,GAAM,GAlBA,gDAqBnB6D,EAAQ,KACRpC,EAAAA,EAAAA,GAAW,EAAD,IAAM,GAtBG,yDAAH,sDA4BpBqE,EAAAA,EAAAA,YAAU,WACR1G,GACE2G,EAAAA,EAAAA,IAAiB,CACf,CAAEC,KAAM,6BAA8BzG,MAAO,iCAGjD2F,GACD,GAAE,IAEH,IAoBM1G,EAAU,SAACyH,GACO,YAAlBA,EAAO/G,SACToF,EAAU,MACVY,IAEH,EAuBD,OACE,4BACE,0BACE,gBAAKlD,UAAU,OAAf,UACE,SAAC,KAAD,CAAQoB,KAAK,SAASlB,QAAS,kBAxBrCoC,EAAU,WACVO,EAAU,mBAuB2B,EAA/B,yBAGFb,IACA,iBAAKhC,UAAU,0CAAf,WACE,gBAAKA,UAAU,8BAAf,UACE,SAAC,KAAD,CAAasB,aAAc,QAAStD,MAAM,mBAAQgD,MAAM,QAAQK,MAAM,eAA5B,+BAG5C,SAAC,KAAD,CAAQe,OAAQA,EAAQ8B,eA7DT,SAACC,GAItB,GAHAA,EAAMC,iBACN/B,EAAU8B,EAAME,OAAOrD,OAEnBmD,EAAME,OAAOrD,MAAMjC,OAAS,EAAG,CACjC,IAAMuF,EAAQ,IAAIC,OAAOnC,EAAQ,MAC3BoC,EAAetC,EAAQuC,QAAO,SAACC,GACnC,GAAIA,EAAK/H,QAAQgI,MAAML,GACrB,OAAOI,CAEV,IACD7C,EAAQ2C,EACT,KAAM,CACL,IAAMA,EAAetC,EAAQuC,QAAO,SAACC,GACnC,OAAOA,CACR,IACD7C,EAAQ2C,EACT,CACF,EA2C+DzD,YAAa,kCAIzE,UAAC,KAAD,YACa,OAAVxE,QAAU,IAAVA,GAAA,UAAAA,EAAYkB,WAAZ,eAAiBC,0BAA0B,SAAC,EAAD,CAAcnB,WAAYA,EAAYE,OAAQA,EAAQD,QAASA,KAChG,OAAVD,QAAU,IAAVA,GAAA,UAAAA,EAAYkB,WAAZ,eAAiBE,6BAA6B,SAAC,EAAD,CAAcpB,WAAYA,EAAYE,OAAQA,EAAQD,QAASA,KACnG,OAAVD,QAAU,IAAVA,GAAA,UAAAA,EAAYkB,WAAZ,eAAiBsF,6BAA6B,SAAC,KAAD,CAAaxG,WAAYA,EAAYC,QAASA,EAASC,OAAQA,EAAQc,MAAM,oBAG7HyE,IAAa,SAAC,KAAD,CAAe4C,UAAW,EAAGC,aAAc,GAAIC,YAAa,KAGxE9C,IACA,gBAAKhC,UAAU,uBAAf,UACE,mBAAOA,UAAU,2BAAjB,WACE,4BACE,wBACGwB,EAAQuD,KAAI,SAACL,EAAMM,GAAP,OACX,eAAgBhF,UAAU,cAA1B,SAAyC0E,GAAhCM,EADE,SAKjB,2BACGpD,EAAKmD,KAAI,SAACL,EAAMM,GAAP,OACR,gBAAIhF,UAAU,cAAd,WACE,wBAAKgF,EAAQ,KACb,yBACE,6CAEF,gBAAIhF,UAAU,YAAd,WACE,mCAEG,IAAIvB,KAAJ,OAASiG,QAAT,IAASA,OAAT,EAASA,EAAM5H,gBAAgBmI,qBAElC,mCAEG,IAAIxG,KAAJ,OAASiG,QAAT,IAASA,OAAT,EAASA,EAAM1H,kBAAkBiI,wBAGtC,yBAAS,OAAJP,QAAI,IAAJA,OAAA,EAAAA,EAAMvF,SAAU,KACrB,+BAAKuF,QAAL,IAAKA,OAAL,EAAKA,EAAM/H,WACX,yBAAS,OAAJ+H,QAAI,IAAJA,OAAA,EAAAA,EAAM7H,YAAa,OACxB,yBACE,SAAC,KAAD,CAAaK,OAAM,OAAEwH,QAAF,IAAEA,OAAF,EAAEA,EAAMxH,YAE7B,yBACE,iBAAK8C,UAAU,qCAAf,WACE,SAAC,IAAD,CAAUE,QAAS,kBA7ErB,SAACwE,GACjBpC,EAAUoC,GACV7B,EAAU,sBACX,CA0E4CqC,CAAUR,EAAhB,KACnB,SAAC,KAAD,CAAUxE,QAAS,kBAzEpB,SAACwE,GAClBjD,EAAS,kCAAD,OAC4BiD,EAAK5E,iBAE1C,CAqE4CqF,CAAWT,EAAjB,KACnB,SAAC,KAAD,CAAUxE,QAAS,kBApEpB,SAACwE,GAClBpC,EAAUoC,GACV7B,EAAU,sBACX,CAiE4CuC,CAAWV,EAAjB,WAzBQM,EADzB,YAoChBhD,IAAc,SAAC,KAAD,CAAYS,QAASA,EAASF,YAAaA,EAAaI,UAAWA,EAAWzC,QAAS,SAACyD,GAAD,OAAOT,EAAeS,EAAEU,OAAOxE,GAA/B,EAAoCwF,YAAU,MAI1J,C","sources":["webpack://filter-ticket/./src/pages/reason_of_outage/RFOModalForm.module.css?2f2d","pages/reason_of_outage/RFOModalForm.jsx","pages/reason_for_outage_trouble/ReasonForOutageTrouble.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"modal-box-custom\":\"RFOModalForm_modal-box-custom__JEifs\",\"modal-open\":\"RFOModalForm_modal-open__WPBzD\",\"modal-toggle\":\"RFOModalForm_modal-toggle__YgQby\",\"modal\":\"RFOModalForm_modal__1-IzV\",\"modal-bottom\":\"RFOModalForm_modal-bottom__q-4e5\",\"modal-middle\":\"RFOModalForm_modal-middle__4SIjk\",\"modal-box-2\":\"RFOModalForm_modal-box-2__Gj-ag\"};","import { useDispatch, useSelector } from 'react-redux';\r\nimport { Formik, Field, Form } from 'formik';\r\nimport {\r\n  useAddRFOGangguanMutation, useUpdateRFOGangguanMutation,\r\n} from '../../store/features/rfo/rfoApiSlice';\r\nimport styles from './RFOModalForm.module.css';\r\nimport { selectCurrentUser } from '../../store/features/auth/authSlice';\r\nimport { setModal } from '../../store/features/modal/modalSlice';\r\nimport { RFOSingleSchema } from '../../utils/schema_validation_form';\r\nimport catchError from '../../services/catchError';\r\nimport handleResponse from '../../services/handleResponse';\r\nimport { Button, ButtonIconExit, Required } from '../../components';\r\n\r\nfunction RFOModalForm({ stateModal, getInfo, detail }) {\r\n  const initialValues = {\r\n    problem: detail?.problem || '',\r\n    action: detail?.action || '',\r\n    deskripsi: detail?.deskripsi || '',\r\n    mulai_gangguan: detail?.mulai_gangguan.split(' ')[0] || '',\r\n    selesai_gangguan: detail?.selesai_gangguan.split(' ')[0] || '',\r\n    nomor_tiket: detail?.nomor_tiket || '',\r\n    status: detail?.status || '',\r\n    lampiran: '' || '',\r\n\r\n  }\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onBtnClose = (title) => {\r\n    const newState = {\r\n      ...stateModal,\r\n      rfo: { ...stateModal.rfo, showAddModalRFOTrouble: false, showUpdateModalRFOTrouble: false },\r\n    };\r\n    dispatch(setModal(newState));\r\n  };\r\n\r\n  const { data: user } = useSelector(selectCurrentUser);\r\n\r\n  const [addRFOGangguan] = useAddRFOGangguanMutation()\r\n  const [updateRFOGangguan] = useUpdateRFOGangguanMutation()\r\n\r\n  const onSubmitData = async (payload, resetForm) => {\r\n    const start = new Date(payload.mulai_gangguan);\r\n    const end = new Date(payload.selesai_gangguan);\r\n    const formatStart = `${start.getFullYear()}-${start.getMonth().toString().length === 1 ? `0${start.getMonth() + 1}` : start.getMonth() + 1}-${start.getDate().toString().length === 1 ? `0${start.getDate()}` : start.getDate()} 12:00:00.000`;\r\n    const formatEnd = `${end.getFullYear()}-${end.getMonth().toString().length === 1 ? `0${end.getMonth() + 1}` : end.getMonth() + 1}-${end.getDate().toString().length === 1 ? `0${end.getDate()}` : end.getDate()} 12:00:00.000`;\r\n    const body = {\r\n      nomor_tiket: payload.nomor_tiket,\r\n      mulai_gangguan: formatStart,\r\n      selesai_gangguan: formatEnd,\r\n      problem: payload.problem,\r\n      action: payload.action,\r\n      status: payload.status,\r\n      deskripsi: payload.deskripsi,\r\n      durasi: payload.durasi,\r\n      user_id: user.id_user,\r\n    };\r\n    try {\r\n      // create\r\n      if (detail === null) {\r\n        doCreate(body, resetForm)\r\n      } else {\r\n        // update\r\n        doUpdate(body);\r\n      }\r\n    } catch (error) {\r\n      catchError(error, true);\r\n    }\r\n  };\r\n\r\n  const doCreate = async (body, resetForm) => {\r\n    const add = await addRFOGangguan({ ...body });\r\n    if (add.data.status === 'success' || add.data.status === 'Success') {\r\n      handleResponse(add);\r\n      setTimeout(() => {\r\n        resetForm();\r\n        onBtnClose();\r\n        getInfo({ status: 'success' });\r\n      }, 2000);\r\n    } else {\r\n      catchError(add, true);\r\n    }\r\n  }\r\n\r\n  const doUpdate = async (body) => {\r\n    const update = await updateRFOGangguan({\r\n      id: detail.id_rfo_gangguan,\r\n      body: { ...body },\r\n    });\r\n    if (update.data.status === 'success' || update.data.status === 'Success') {\r\n      handleResponse(update);\r\n      setTimeout(() => {\r\n        getInfo({ status: 'success' });\r\n        onBtnClose();\r\n      }, 2000);\r\n    } else {\r\n      catchError(update, true);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center\">\r\n      <div className={`modal-box h-fit max-h-fit ${styles['modal-box-custom']}`}>\r\n        <ButtonIconExit onClick={onBtnClose} />\r\n        <h3 className=\"text-lg font-bold\">{detail === null ? ('Tambah Reason For Outage Gangguan') : ('Ubah Reason For Outage Gangguan')}</h3>\r\n        <hr className=\"my-2\" />\r\n\r\n        <Formik\r\n          enableReinitialize\r\n          validationSchema={RFOSingleSchema}\r\n          initialValues={initialValues}\r\n          onSubmit={(values, { resetForm }) => {\r\n            onSubmitData(values, resetForm);\r\n          }}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            isValid,\r\n            handleChange,\r\n            handleBlur,\r\n          }) => (\r\n            <Form>\r\n              <div className=\"form-control\">\r\n                <label htmlFor=\"problem\" className=\"label\">\r\n                  <span className=\"label-text\"> Masalah:</span>\r\n                </label>\r\n\r\n                <Field\r\n                  id=\"problem\"\r\n                  name=\"problem\"\r\n                  placeholder=\"Masalah\"\r\n                  value={values.problem}\r\n                  component=\"textarea\"\r\n                  onBlur={handleBlur}\r\n                  onChange={handleChange}\r\n                  className=\"textarea textarea-bordered h-10\"\r\n                />\r\n                {errors.problem && touched.problem && <Required errors={errors.problem} />}\r\n              </div>\r\n\r\n              <div className=\"form-control\">\r\n                <label htmlFor=\"action\" className=\"label\">\r\n                  <span className=\"label-text\"> Aksi:</span>\r\n                </label>\r\n\r\n                <Field\r\n                  id=\"action\"\r\n                  name=\"action\"\r\n                  placeholder=\"Aksi\"\r\n                  value={values.action}\r\n                  component=\"textarea\"\r\n                  onBlur={handleBlur}\r\n                  onChange={handleChange}\r\n                  className=\"textarea textarea-bordered h-10\"\r\n                />\r\n                {errors.action && touched.action && <Required errors={errors.action} />}\r\n              </div>\r\n\r\n              <div className=\"form-control\">\r\n                <label htmlFor=\"deskripsi\" className=\"label\">\r\n                  <span className=\"label-text\"> Deskripsi:</span>\r\n                </label>\r\n\r\n                <Field\r\n                  id=\"deskripsi\"\r\n                  name=\"deskripsi\"\r\n                  placeholder=\"Deskripsi\"\r\n                  value={values.deskripsi}\r\n                  component=\"textarea\"\r\n                  onBlur={handleBlur}\r\n                  onChange={handleChange}\r\n                  className=\"textarea textarea-bordered h-24\"\r\n                />\r\n                {errors.deskripsi && touched.deskripsi && <Required errors={errors.deskripsi} />}\r\n              </div>\r\n\r\n              <div className=\"flex flex-col md:flex-row gap-3\">\r\n                <div className=\"form-control flex-1\">\r\n                  <label htmlFor=\"mulai_gangguan\" className=\"label\">\r\n                    <span className=\"label-text\"> Waktu Mulai Gangguan</span>\r\n                  </label>\r\n\r\n                  <Field\r\n                    id=\"mulai_gangguan\"\r\n                    name=\"mulai_gangguan\"\r\n                    placeholder=\"\"\r\n                    value={values.mulai_gangguan}\r\n                    type=\"date\"\r\n                    onBlur={handleBlur}\r\n                    onChange={handleChange}\r\n                    className=\"input input-md input-bordered  max-w-full\"\r\n                  />\r\n                  {errors.mulai_gangguan && touched.mulai_gangguan && <Required errors={errors.mulai_gangguan} />}\r\n\r\n                </div>\r\n\r\n                <div className=\"form-control flex-1\">\r\n                  <label htmlFor=\"selesai_gangguan\" className=\"label\">\r\n                    <span className=\"label-text\"> Waktu Selesai Gangguan</span>\r\n                  </label>\r\n\r\n                  <Field\r\n                    id=\"selesai_gangguan\"\r\n                    name=\"selesai_gangguan\"\r\n                    placeholder=\"\"\r\n                    value={values.selesai_gangguan}\r\n                    type=\"date\"\r\n                    onBlur={handleBlur}\r\n                    onChange={handleChange}\r\n                    className=\"input input-md input-bordered  max-w-full\"\r\n                  />\r\n                  {errors.selesai_gangguan && touched.selesai_gangguan && <Required errors={errors.selesai_gangguan} />}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-col md:flex-row gap-3\">\r\n                <div className=\"form-control flex-1\">\r\n                  <label htmlFor=\"nomor_tiket\" className=\"label\">\r\n                    <span className=\"label-text\"> Tiket Pelaporan (Opsional)</span>\r\n                  </label>\r\n\r\n                  <Field\r\n                    id=\"nomor_tiket\"\r\n                    name=\"nomor_tiket\"\r\n                    placeholder=\"\"\r\n                    value={values.nomor_tiket}\r\n                    type=\"text\"\r\n                    onBlur={handleBlur}\r\n                    onChange={handleChange}\r\n                    className=\"input input-md input-bordered  max-w-full\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-control flex-1\">\r\n                  <label htmlFor=\"location\" className=\"label\">\r\n                    <span className=\"label-text\"> Status</span>\r\n                  </label>\r\n                  <Field\r\n                    component=\"select\"\r\n                    id=\"status\"\r\n                    name=\"status\"\r\n                    value={values.status}\r\n                    onBlur={handleBlur}\r\n                    onChange={handleChange}\r\n                    className=\"select w-full max-w-full input-bordered\"\r\n\r\n                  >\r\n                    <option value=\"\" label=\"Pilih Status\" defaultValue={\"\"}>Pilih Status</option>\r\n                    <option value=\"open\" label=\"Open\">Open</option>\r\n                    <option value=\"closed\" label=\"Closed\">Closed</option>\r\n                  </Field>\r\n                  {errors.status && touched.status && <Required errors={errors.status} />}\r\n                </div>\r\n              </div>\r\n\r\n              <hr className=\"my-2 mt-5\" />\r\n              <div className=\"modal-action justify-center\">\r\n                <Button type=\"button\" className=\"mr-5\" onClick={() => onBtnClose()} >Batal</Button>\r\n                <Button type=\"submit\" disabled={!isValid} className=\"btn-success\">Simpan</Button>\r\n              </div>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RFOModalForm;","import { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button, CategoryRFO, DoDelete, DoDetail, DoUpdate, LabelStatus, Search, DeleteModal, Pagination, SkeletonTable, Modal } from '../../components';\r\nimport catchError from '../../services/catchError';\r\nimport { updateBreadcrumb } from '../../store/features/breadcrumb/breadcrumbSlice';\r\nimport { selectModalState, setModal } from '../../store/features/modal/modalSlice';\r\nimport {\r\n  useAllRFOMasalMutation,\r\n} from '../../store/features/rfo/rfoApiSlice';\r\nimport {\r\n  selectAllRFOMasal,\r\n  setRFOMasal,\r\n} from '../../store/features/rfo/rfoSlice';\r\nimport RFOModalForm from '../reason_of_outage/RFOModalForm';\r\n\r\n\r\nconst columns = [\r\n  'No',\r\n  'Topik',\r\n  'Waktu Gangguan',\r\n  'Durasi',\r\n  'Masalah',\r\n  'Keterangan',\r\n  'Status RFO',\r\n  'Aksi',\r\n];\r\n\r\n\r\nfunction ReasonForOutageTrouble() {\r\n  const navigate = useNavigate();\r\n  const [rows, setRows] = useState([]);\r\n  const dispatch = useDispatch();\r\n  const [allRFOMasal, { isLoading }] = useAllRFOMasalMutation();\r\n  const stateModal = useSelector(selectModalState);\r\n  const allData = useSelector(selectAllRFOMasal);\r\n  const [search, setSearch] = useState('');\r\n  const [detail, setDetail] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [perPage, setPerPage] = useState([5]);\r\n  const [countPage, setCountPage] = useState([1]);\r\n\r\n  const openModal = (modal) => {\r\n    let newState;\r\n    if (modal === 'add rfo gangguan') {\r\n      newState = { ...stateModal, rfo: { ...stateModal.rfo, showAddModalRFOTrouble: true } };\r\n    } else if (modal === 'update rfo gangguan') {\r\n      newState = { ...stateModal, rfo: { ...stateModal.rfo, showUpdateModalRFOTrouble: true } };\r\n    } else if (modal === 'delete rfo gangguan') {\r\n      newState = { ...stateModal, rfo: { ...stateModal.rfo, showDeleteModalRFOTrouble: true } };\r\n    }\r\n    dispatch(setModal(newState));\r\n    window.scrollTo(0, 0);\r\n  }\r\n\r\n  const getAllRFOMasal = async (page = 1) => {\r\n    const param = `?page=${page}`;\r\n    try {\r\n      const data = await allRFOMasal(param).unwrap();\r\n      if (data.status === 'success' || data.status === 'Success') {\r\n        const result = data.data.data;\r\n        dispatch(setRFOMasal({ data: result }));\r\n        setRows(result);\r\n        setCurrentPage(data.data.current_page);\r\n        setPerPage([data.data.per_page]);\r\n\r\n        const countPaginate = [];\r\n        for (let i = 0; i < data.data.last_page; i++) {\r\n          countPaginate.push(i + 1);\r\n        }\r\n        setCountPage(countPaginate);\r\n      } else {\r\n        setRows([]);\r\n        catchError(data, true);\r\n      }\r\n    } catch (err) {\r\n      setRows([]);\r\n      catchError(err, true);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      updateBreadcrumb([\r\n        { path: '/reason_of_outage_gangguan', title: 'Reason For Outage Gangguan' },\r\n      ])\r\n    );\r\n    getAllRFOMasal();\r\n  }, []);\r\n\r\n  const onHandleSearch = (event) => {\r\n    event.preventDefault();\r\n    setSearch(event.target.value);\r\n\r\n    if (event.target.value.length > 0) {\r\n      const regex = new RegExp(search, 'ig');\r\n      const searchResult = allData.filter((item) => {\r\n        if (item.problem.match(regex)) {\r\n          return item;\r\n        }\r\n      });\r\n      setRows(searchResult);\r\n    } else {\r\n      const searchResult = allData.filter((item) => {\r\n        return item;\r\n      });\r\n      setRows(searchResult);\r\n    }\r\n  }\r\n\r\n  const getInfo = ($event) => {\r\n    if ($event.status === 'success') {\r\n      setDetail(null);\r\n      getAllRFOMasal();\r\n    }\r\n  };\r\n\r\n  const addData = () => {\r\n    setDetail(null);\r\n    openModal('add rfo gangguan')\r\n  }\r\n\r\n  const updaeData = (item) => {\r\n    setDetail(item);\r\n    openModal('update rfo gangguan')\r\n  }\r\n\r\n  const detailData = (item) => {\r\n    navigate(\r\n      `/reason_of_outage/detail_masal/${item.id_rfo_gangguan}`\r\n    );\r\n  }\r\n\r\n  const deleteData = (item) => {\r\n    setDetail(item);\r\n    openModal('delete rfo gangguan');\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <div className=\"mb-5\">\r\n          <Button type=\"button\" onClick={() => addData()}>Tambah</Button>\r\n        </div>\r\n      </div>\r\n      {!isLoading && (\r\n        <div className=\"flex gap-5 flex-col md:flex md:flex-row\">\r\n          <div className=\"form-control w-full md:w-52\">\r\n            <CategoryRFO defaultValue={'masal'} data={<option value=\"masal\" label=\"RFO Gangguan\">RFO Gangguan</option>} />\r\n          </div>\r\n\r\n          <Search search={search} onHandleSearch={onHandleSearch} placeholder={'Cari data RFO gangguan...'} />\r\n        </div>\r\n      )}\r\n\r\n      <Modal>\r\n        {stateModal?.rfo?.showAddModalRFOTrouble && <RFOModalForm stateModal={stateModal} detail={detail} getInfo={getInfo} />}\r\n        {stateModal?.rfo?.showUpdateModalRFOTrouble && <RFOModalForm stateModal={stateModal} detail={detail} getInfo={getInfo} />}\r\n        {stateModal?.rfo?.showDeleteModalRFOTrouble && <DeleteModal stateModal={stateModal} getInfo={getInfo} detail={detail} title=\"RFO Gangguan\" />}\r\n      </Modal>\r\n\r\n      {isLoading && <SkeletonTable countRows={8} countColumns={10} totalFilter={2} />}\r\n\r\n      {/* start table */}\r\n      {!isLoading && (\r\n        <div className=\"overflow-x-auto mt-8\">\r\n          <table className=\"table table-zebra w-full\">\r\n            <thead>\r\n              <tr>\r\n                {columns.map((item, index) => (\r\n                  <th key={index} className=\"text-center\">{item}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {rows.map((item, index) => (\r\n                <tr className=\"text-center\" key={index}>\r\n                  <th>{index + 1}</th>\r\n                  <td>\r\n                    <p>Gangguan Masal</p>\r\n                  </td>\r\n                  <td className=\"text-left\">\r\n                    <p>\r\n                      Dibuat:\r\n                      {new Date(item?.mulai_gangguan).toLocaleString()}\r\n                    </p>\r\n                    <p>\r\n                      Diubah:\r\n                      {new Date(item?.selesai_gangguan).toLocaleString()}\r\n                    </p>\r\n                  </td>\r\n                  <td>{item?.durasi || 0}</td>\r\n                  <td>{item?.problem}</td>\r\n                  <td>{item?.deskripsi || '-'}</td>\r\n                  <td>\r\n                    <LabelStatus status={item?.status} />\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"flex flex-row gap-3 justify-center\">\r\n                      <DoUpdate onClick={() => updaeData(item)} />\r\n                      <DoDetail onClick={() => detailData(item)} />\r\n                      <DoDelete onClick={() => deleteData(item)} />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {!isLoading && (<Pagination perPage={perPage} currentPage={currentPage} countPage={countPage} onClick={(i) => getAllRFOMasal(i.target.id)} serverMode />)}\r\n      {/* end table */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReasonForOutageTrouble;"],"names":["stateModal","getInfo","detail","initialValues","problem","action","deskripsi","mulai_gangguan","split","selesai_gangguan","nomor_tiket","status","lampiran","dispatch","useDispatch","onBtnClose","title","newState","rfo","showAddModalRFOTrouble","showUpdateModalRFOTrouble","setModal","user","useSelector","selectCurrentUser","data","useAddRFOGangguanMutation","addRFOGangguan","useUpdateRFOGangguanMutation","updateRFOGangguan","onSubmitData","payload","resetForm","start","Date","end","formatStart","getFullYear","getMonth","toString","length","getDate","formatEnd","body","durasi","user_id","id_user","doCreate","doUpdate","error","catchError","add","handleResponse","setTimeout","id","id_rfo_gangguan","update","className","styles","onClick","enableReinitialize","validationSchema","RFOSingleSchema","onSubmit","values","errors","touched","isValid","handleChange","handleBlur","htmlFor","name","placeholder","value","component","onBlur","onChange","type","label","defaultValue","disabled","columns","navigate","useNavigate","useState","rows","setRows","useAllRFOMasalMutation","allRFOMasal","isLoading","selectModalState","allData","selectAllRFOMasal","search","setSearch","setDetail","currentPage","setCurrentPage","perPage","setPerPage","countPage","setCountPage","openModal","modal","showDeleteModalRFOTrouble","window","scrollTo","getAllRFOMasal","page","param","unwrap","result","setRFOMasal","current_page","per_page","countPaginate","i","last_page","push","useEffect","updateBreadcrumb","path","$event","onHandleSearch","event","preventDefault","target","regex","RegExp","searchResult","filter","item","match","countRows","countColumns","totalFilter","map","index","toLocaleString","updaeData","detailData","deleteData","serverMode"],"sourceRoot":""}