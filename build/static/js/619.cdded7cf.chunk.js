"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[619],{65454:function(e,a,n){n.r(a),n.d(a,{default:function(){return Z}});var t=n(74165),s=n(15861),l=n(1413),r=n(70885),o=n(72791),i=n(95048),u=n(16871),c=n(14450),d=n(11803),g=n(26290),m=n(89504),h=n(58812),x=n(74102),f=n(55705),p="RFOModalForm_modal-box-custom__JEifs",v=n(26968),j=n(86017),b=n(19585),N=n(80184);var _=function(e){var a=e.stateModal,n=e.getInfo,o=e.detail,u={problem:(null===o||void 0===o?void 0:o.problem)||"",action:(null===o||void 0===o?void 0:o.action)||"",deskripsi:(null===o||void 0===o?void 0:o.deskripsi)||"",mulai_gangguan:(null===o||void 0===o?void 0:o.mulai_gangguan.split(" ")[0])||"",selesai_gangguan:(null===o||void 0===o?void 0:o.selesai_gangguan.split(" ")[0])||"",nomor_tiket:(null===o||void 0===o?void 0:o.nomor_tiket)||"",status:(null===o||void 0===o?void 0:o.status)||"",lampiran:""},g=(0,i.I0)(),x=function(e){var n=(0,l.Z)((0,l.Z)({},a),{},{rfo:(0,l.Z)((0,l.Z)({},a.rfo),{},{showAddModalRFOTrouble:!1,showUpdateModalRFOTrouble:!1})});g((0,m.cf)(n))},_=(0,i.v9)(v.HF).data,k=(0,h.XG)(),Z=(0,r.Z)(k,1)[0],w=(0,h.oA)(),F=(0,r.Z)(w,1)[0],M=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(a,n){var s,l,r,i,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new Date(a.mulai_gangguan),l=new Date(a.selesai_gangguan),r="".concat(s.getFullYear(),"-").concat(1===s.getMonth().toString().length?"0".concat(s.getMonth()+1):s.getMonth()+1,"-").concat(1===s.getDate().toString().length?"0".concat(s.getDate()):s.getDate()," 12:00:00.000"),i="".concat(l.getFullYear(),"-").concat(1===l.getMonth().toString().length?"0".concat(l.getMonth()+1):l.getMonth()+1,"-").concat(1===l.getDate().toString().length?"0".concat(l.getDate()):l.getDate()," 12:00:00.000"),u={nomor_tiket:a.nomor_tiket,mulai_gangguan:r,selesai_gangguan:i,problem:a.problem,action:a.action,status:a.status,deskripsi:a.deskripsi,durasi:a.durasi,user_id:_.id_user};try{null===o?S(u,n):C(u)}catch(t){(0,d.Z)(t,!0)}case 6:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(a,s){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z((0,l.Z)({},a));case 2:"success"===(r=e.sent).data.status||"Success"===r.data.status?((0,b.Z)(r),setTimeout((function(){s(),x(),n({status:"success"})}),2e3)):(0,d.Z)(r,!0);case 4:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),C=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(a){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({id:o.id_rfo_gangguan,body:(0,l.Z)({},a)});case 2:"success"===(s=e.sent).data.status||"Success"===s.data.status?((0,b.Z)(s),setTimeout((function(){n({status:"success"}),x()}),2e3)):(0,d.Z)(s,!0);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,N.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,N.jsxs)("div",{className:"modal-box h-fit max-h-fit ".concat(p),children:[(0,N.jsx)(c.b_,{onClick:x}),(0,N.jsx)("h3",{className:"text-lg font-bold",children:null===o?"Tambah Reason For Outage Gangguan":"Ubah Reason For Outage Gangguan"}),(0,N.jsx)("hr",{className:"my-2"}),(0,N.jsx)(f.J9,{enableReinitialize:!0,validationSchema:j.sw,initialValues:u,onSubmit:function(e,a){var n=a.resetForm;M(e,n)},children:function(e){var a=e.values,n=e.errors,t=e.touched,s=e.isValid,l=e.handleChange,r=e.handleBlur;return(0,N.jsxs)(f.l0,{children:[(0,N.jsxs)("div",{className:"form-control",children:[(0,N.jsx)("label",{htmlFor:"problem",className:"label",children:(0,N.jsx)("span",{className:"label-text",children:" Masalah:"})}),(0,N.jsx)(f.gN,{id:"problem",name:"problem",placeholder:"Masalah",value:a.problem,component:"textarea",onBlur:r,onChange:l,className:"textarea textarea-bordered h-10"}),n.problem&&t.problem&&(0,N.jsx)(c.aH,{errors:n.problem})]}),(0,N.jsxs)("div",{className:"form-control",children:[(0,N.jsx)("label",{htmlFor:"action",className:"label",children:(0,N.jsx)("span",{className:"label-text",children:" Aksi:"})}),(0,N.jsx)(f.gN,{id:"action",name:"action",placeholder:"Aksi",value:a.action,component:"textarea",onBlur:r,onChange:l,className:"textarea textarea-bordered h-10"}),n.action&&t.action&&(0,N.jsx)(c.aH,{errors:n.action})]}),(0,N.jsxs)("div",{className:"form-control",children:[(0,N.jsx)("label",{htmlFor:"deskripsi",className:"label",children:(0,N.jsx)("span",{className:"label-text",children:" Deskripsi:"})}),(0,N.jsx)(f.gN,{id:"deskripsi",name:"deskripsi",placeholder:"Deskripsi",value:a.deskripsi,component:"textarea",onBlur:r,onChange:l,className:"textarea textarea-bordered h-24"}),n.deskripsi&&t.deskripsi&&(0,N.jsx)(c.aH,{errors:n.deskripsi})]}),(0,N.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,N.jsxs)("div",{className:"form-control flex-1",children:[(0,N.jsx)("label",{htmlFor:"mulai_gangguan",className:"label",children:(0,N.jsx)("span",{className:"label-text",children:" Waktu Mulai Gangguan"})}),(0,N.jsx)(f.gN,{id:"mulai_gangguan",name:"mulai_gangguan",placeholder:"",value:a.mulai_gangguan,type:"date",onBlur:r,onChange:l,className:"input input-md input-bordered  max-w-full"}),n.mulai_gangguan&&t.mulai_gangguan&&(0,N.jsx)(c.aH,{errors:n.mulai_gangguan})]}),(0,N.jsxs)("div",{className:"form-control flex-1",children:[(0,N.jsx)("label",{htmlFor:"selesai_gangguan",className:"label",children:(0,N.jsx)("span",{className:"label-text",children:" Waktu Selesai Gangguan"})}),(0,N.jsx)(f.gN,{id:"selesai_gangguan",name:"selesai_gangguan",placeholder:"",value:a.selesai_gangguan,type:"date",onBlur:r,onChange:l,className:"input input-md input-bordered  max-w-full"}),n.selesai_gangguan&&t.selesai_gangguan&&(0,N.jsx)(c.aH,{errors:n.selesai_gangguan})]})]}),(0,N.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,N.jsxs)("div",{className:"form-control flex-1",children:[(0,N.jsx)("label",{htmlFor:"nomor_tiket",className:"label",children:(0,N.jsx)("span",{className:"label-text",children:" Tiket Pelaporan (Opsional)"})}),(0,N.jsx)(f.gN,{id:"nomor_tiket",name:"nomor_tiket",placeholder:"",value:a.nomor_tiket,type:"text",onBlur:r,onChange:l,className:"input input-md input-bordered  max-w-full"})]}),(0,N.jsxs)("div",{className:"form-control flex-1",children:[(0,N.jsx)("label",{htmlFor:"location",className:"label",children:(0,N.jsx)("span",{className:"label-text",children:" Status"})}),(0,N.jsxs)(f.gN,{component:"select",id:"status",name:"status",value:a.status,onBlur:r,onChange:l,className:"select w-full max-w-full input-bordered",children:[(0,N.jsx)("option",{value:"",label:"Pilih Status",defaultValue:"",children:"Pilih Status"}),(0,N.jsx)("option",{value:"open",label:"Open",children:"Open"}),(0,N.jsx)("option",{value:"closed",label:"Closed",children:"Closed"})]}),n.status&&t.status&&(0,N.jsx)(c.aH,{errors:n.status})]})]}),(0,N.jsx)("hr",{className:"my-2 mt-5"}),(0,N.jsxs)("div",{className:"modal-action justify-center",children:[(0,N.jsx)(c.zx,{type:"button",className:"mr-5",onClick:function(){return x()},children:"Batal"}),(0,N.jsx)(c.zx,{type:"submit",disabled:!s,className:"btn-success",children:"Simpan"})]})]})}})]})})},k=["No","Topik","Waktu Gangguan","Durasi","Masalah","Keterangan","Status RFO","Aksi"];var Z=function(){var e,a,n,f=(0,u.s0)(),p=(0,o.useState)([]),v=(0,r.Z)(p,2),j=v[0],b=v[1],Z=(0,i.I0)(),w=(0,h.fb)(),F=(0,r.Z)(w,2),M=F[0],S=F[1].isLoading,C=(0,i.v9)(m.HH),O=(0,i.v9)(x.YE),y=(0,o.useState)(""),R=(0,r.Z)(y,2),D=R[0],T=R[1],G=(0,o.useState)(null),H=(0,r.Z)(G,2),B=H[0],z=H[1],A=(0,o.useState)(1),I=(0,r.Z)(A,2),P=I[0],E=I[1],U=(0,o.useState)([5]),V=(0,r.Z)(U,2),W=V[0],Y=V[1],L=(0,o.useState)([1]),J=(0,r.Z)(L,2),K=J[0],Q=J[1],X=function(e){var a;"add rfo gangguan"===e?a=(0,l.Z)((0,l.Z)({},C),{},{rfo:(0,l.Z)((0,l.Z)({},C.rfo),{},{showAddModalRFOTrouble:!0})}):"update rfo gangguan"===e?a=(0,l.Z)((0,l.Z)({},C),{},{rfo:(0,l.Z)((0,l.Z)({},C.rfo),{},{showUpdateModalRFOTrouble:!0})}):"delete rfo gangguan"===e&&(a=(0,l.Z)((0,l.Z)({},C),{},{rfo:(0,l.Z)((0,l.Z)({},C.rfo),{},{showDeleteModalRFOTrouble:!0})})),Z((0,m.cf)(a)),window.scrollTo(0,0)},q=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var a,n,s,l,r,o,i=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:1,n="?page=".concat(a),e.prev=2,e.next=5,M(n).unwrap();case 5:if("success"===(s=e.sent).status||"Success"===s.status){for(l=s.data.data,Z((0,x.tz)({data:l})),b(l),E(s.data.current_page),Y([s.data.per_page]),r=[],o=0;o<s.data.last_page;o++)r.push(o+1);Q(r)}else b([]),(0,d.Z)(s,!0);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),b([]),(0,d.Z)(e.t0,!0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){Z((0,g.oi)([{path:"/reason_of_outage_gangguan",title:"Reason For Outage Gangguan"}])),q()}),[]);var $=function(e){"success"===e.status&&(z(null),q())};return(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{children:(0,N.jsx)("div",{className:"mb-5",children:(0,N.jsx)(c.zx,{type:"button",onClick:function(){return z(null),void X("add rfo gangguan")},children:"Tambah"})})}),!S&&(0,N.jsxs)("div",{className:"flex gap-5 flex-col md:flex md:flex-row",children:[(0,N.jsx)("div",{className:"form-control w-full md:w-52",children:(0,N.jsx)(c.e4,{defaultValue:"masal",data:(0,N.jsx)("option",{value:"masal",label:"RFO Gangguan",children:"RFO Gangguan"})})}),(0,N.jsx)(c.ol,{search:D,onHandleSearch:function(e){if(e.preventDefault(),T(e.target.value),e.target.value.length>0){var a=new RegExp(D,"ig"),n=O.filter((function(e){if(e.problem.match(a))return e}));b(n)}else{var t=O.filter((function(e){return e}));b(t)}},placeholder:"Cari data RFO gangguan..."})]}),(0,N.jsxs)(c.u_,{children:[(null===C||void 0===C||null===(e=C.rfo)||void 0===e?void 0:e.showAddModalRFOTrouble)&&(0,N.jsx)(_,{stateModal:C,detail:B,getInfo:$}),(null===C||void 0===C||null===(a=C.rfo)||void 0===a?void 0:a.showUpdateModalRFOTrouble)&&(0,N.jsx)(_,{stateModal:C,detail:B,getInfo:$}),(null===C||void 0===C||null===(n=C.rfo)||void 0===n?void 0:n.showDeleteModalRFOTrouble)&&(0,N.jsx)(c.pf,{stateModal:C,getInfo:$,detail:B,title:"RFO Gangguan"})]}),S&&(0,N.jsx)(c.cY,{countRows:8,countColumns:10,totalFilter:2}),!S&&(0,N.jsx)("div",{className:"overflow-x-auto mt-8",children:(0,N.jsxs)("table",{className:"table table-zebra w-full",children:[(0,N.jsx)("thead",{children:(0,N.jsx)("tr",{children:k.map((function(e,a){return(0,N.jsx)("th",{className:"text-center",children:e},a)}))})}),(0,N.jsx)("tbody",{children:j.map((function(e,a){return(0,N.jsxs)("tr",{className:"text-center",children:[(0,N.jsx)("th",{children:a+1}),(0,N.jsx)("td",{children:(0,N.jsx)("p",{children:"Gangguan Masal"})}),(0,N.jsxs)("td",{className:"text-left",children:[(0,N.jsxs)("p",{children:["Dibuat:",new Date(null===e||void 0===e?void 0:e.mulai_gangguan).toLocaleString()]}),(0,N.jsxs)("p",{children:["Diubah:",new Date(null===e||void 0===e?void 0:e.selesai_gangguan).toLocaleString()]})]}),(0,N.jsx)("td",{children:(null===e||void 0===e?void 0:e.durasi)||0}),(0,N.jsx)("td",{children:null===e||void 0===e?void 0:e.problem}),(0,N.jsx)("td",{children:(null===e||void 0===e?void 0:e.deskripsi)||"-"}),(0,N.jsx)("td",{children:(0,N.jsx)(c.OE,{status:null===e||void 0===e?void 0:e.status})}),(0,N.jsx)("td",{children:(0,N.jsxs)("div",{className:"flex flex-row gap-3 justify-center",children:[(0,N.jsx)(c.W,{onClick:function(){return function(e){z(e),X("update rfo gangguan")}(e)}}),(0,N.jsx)(c.CQ,{onClick:function(){return function(e){f("/reason_of_outage/detail_masal/".concat(e.id_rfo_gangguan))}(e)}}),(0,N.jsx)(c.Zt,{onClick:function(){return function(e){z(e),X("delete rfo gangguan")}(e)}})]})})]},a)}))})]})}),!S&&(0,N.jsx)(c.tl,{perPage:W,currentPage:P,countPage:K,onClick:function(e){return q(e.target.id)},serverMode:!0})]})}}}]);
//# sourceMappingURL=619.cdded7cf.chunk.js.map