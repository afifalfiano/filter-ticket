"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[487],{60487:function(e,a,n){n.r(a);var t=n(42982),r=n(74165),s=n(1413),i=n(15861),c=n(70885),l=n(72791),u=n(95048),o=n(16871),d=n(55705),v=n(64671),p=n(97650),f=n(26290),h=n(26968),x=n(86017),b=n(87416),m=n(11803),Z=n(19585),k=n(14450),w=n(80184);a.default=function(e){var a=e.rfoSingle,n=e.idComplain,j=(0,o.TH)(),_=(0,l.useState)(null),y=(0,c.Z)(_,2),S=y[0],N=y[1],C=(0,l.useState)(!1),F=(0,c.Z)(C,2),g=F[0],z=F[1],D=(0,l.useState)([]),H=(0,c.Z)(D,2),V=H[0],B=H[1],E=(0,o.UO)().id,I=(0,o.s0)(),T=(0,v.rS)(),A=(0,c.Z)(T,1)[0],K=(0,v.qA)(),U=(0,c.Z)(K,1)[0],W=(0,u.I0)(),q=(0,v.s)(),G=(0,c.Z)(q,1)[0],J=(0,b.Wb)(),L=(0,c.Z)(J,1)[0],M=(0,l.useState)(0),O=(0,c.Z)(M,2),R=O[0],P=O[1],Q=(0,u.v9)(f.Ms),X=function(e){B(e)},Y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=void 0!==n?n:E,e.next=4,A(a).unwrap();case 4:t=e.sent,W((0,p.LA)((0,s.Z)({},t))),N(t.data),0===R&&window.location.href.includes("/dashboard/detail/")&&se(t.data),P(R++),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,m.Z)(e.t0,!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),$=(0,u.v9)(h.HF).data,ee=j.pathname.includes("history"),ae=(0,b.b0)(),ne=(0,c.Z)(ae,1)[0],te=(0,b.BB)(),re=(0,c.Z)(te,1)[0],se=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={keluhan_id:a.id_keluhan},e.prev=1,e.next=4,re({body:n}).unwrap();case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(1),(0,m.Z)(e.t0,!1),new Error("Unsuccess read all notification");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(a){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){if(Y(),void 0===n){var e=[].concat((0,t.Z)(Q.data),[{path:"/dashboard/detail/".concat(E),title:"Detail Dasbor"}]);W((0,f.oi)(e)),setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}),500);var a=setInterval((function(){Y()}),3e4);return function(){clearInterval(a)}}}),[]);var ie=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={keluhan_id:a,pop_id:$.pop_id,id_response:1},e.next=4,ne({body:n}).unwrap();case 4:return t=e.sent,e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),(0,m.Z)(e.t0,!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),ce=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={notifikasi_id:a},e.next=4,L({body:n}).unwrap();case 4:return t=e.sent,e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),(0,m.Z)(e.t0,!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),le=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,n){var t,i,c,l,u,o,d,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={balasan:a.balasan,user_id:$.id_user,keluhan_id:S.id_keluhan},e.next=4,U((0,s.Z)({},t));case 4:if("success"!==(i=e.sent).data.status&&"Success"!==i.data.status){e.next=29;break}if(n(),z(!0),(0,Z.Z)(i),!(V.length>0)){e.next=15;break}for((l=new FormData).append("balasan_id",null===i||void 0===i||null===(c=i.data)||void 0===c?void 0:c.id_balasan),u=0;u<V.length;u++)l.append("path[".concat(u,"]"),V[u]);return e.next=15,G({body:l}).unwrap();case 15:return e.next=17,ie(S.id_keluhan);case 17:if("Success"!==(null===(o=e.sent)||void 0===o?void 0:o.status)&&"success"!==(null===o||void 0===o?void 0:o.status)){e.next=25;break}return e.next=21,ce(null===o||void 0===o||null===(d=o.notifikasi)||void 0===d?void 0:d.id_notifikasi);case 21:"Success"===(null===(v=e.sent)||void 0===v?void 0:v.status)||"success"===(null===v||void 0===v?void 0:v.status)?(Y(),z(!1)):((0,m.Z)(v,!0),z(!1)),e.next=27;break;case 25:z(!1),(0,m.Z)(o,!0);case 27:e.next=30;break;case 29:(0,m.Z)(i,!0);case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),(0,m.Z)(e.t0,!0);case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(a,n){return e.apply(this,arguments)}}();return(0,w.jsxs)("div",{children:[!a&&(0,w.jsx)(k.tW,{detailComplain:S}),(0,w.jsxs)("div",{className:"flex w-full flex-col py-5",children:[(0,w.jsx)(k.wS,{detailComplain:S}),(0,w.jsx)("hr",{}),(null===S||void 0===S?void 0:S.balasan.length)>0&&(null===S||void 0===S?void 0:S.balasan.map((function(e,a){return(0,w.jsx)(k.Ex,{item:e},a)}))),ee||a||"open"!==(null===S||void 0===S?void 0:S.status)?!a&&(0,w.jsx)("div",{className:"text-center items-center justify-center mt-10",children:(0,w.jsx)(k.zx,{className:"mr-5",onClick:function(){return I(ee?"/history_dashboard":"/dashboard")},children:"Kembali"})}):(0,w.jsx)(d.J9,{enableReinitialize:!0,validationSchema:x.zd,initialValues:{balasan:""},onSubmit:function(e,a){var n=a.resetForm;le(e,n)},children:function(e){var a=e.values,n=e.errors,t=e.touched,r=e.isValid,s=e.setFieldValue;return(0,w.jsxs)(d.l0,{id:"answer",children:[(0,w.jsxs)("div",{className:"form-control",children:[(0,w.jsx)("label",{htmlFor:"balasan",className:"label",children:(0,w.jsx)("span",{className:"label-text",children:" Balasan"})}),(0,w.jsx)(k.H4,{setFieldValue:function(e){return s("balasan",e)},value:a.balasan,resetData:g}),n.balasan&&t.balasan?(0,w.jsx)("div",{className:"label label-text text-red-500",children:n.balasan}):null]}),(0,w.jsx)(k.G1,{getFile:X}),(0,w.jsxs)("div",{className:"text-center items-center justify-center mt-10",children:[(0,w.jsx)(k.zx,{className:"mr-5",onClick:function(){return I("/dashboard")},children:"Kembali"}),(0,w.jsx)(k.zx,{type:"submit",disabled:!r,className:"btn-success",children:"Simpan"})]})]})}})]})]})}}}]);
//# sourceMappingURL=487.9b0559f0.chunk.js.map