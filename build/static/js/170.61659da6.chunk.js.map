{"version":3,"file":"static/js/170.61659da6.chunk.js","mappings":"uOACA,EAAmC,sC,kECoFnC,MAzEA,YAAsD,EAA/BA,WAAgC,IAApBC,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,OAC1C,GAAgCC,EAAAA,EAAAA,MAAzBC,GAAP,eACA,GAA2BC,EAAAA,EAAAA,MAApBC,GAAP,eAEMC,GAAWC,EAAAA,EAAAA,MACXC,EAAa,WACjBF,GAASG,EAAAA,EAAAA,IAASC,EAAAA,IACnB,EACKC,EAAQ,yCAAG,yGAEiB,OAA1BV,EAAOW,eAFE,iCAGkBT,EAAsBF,EAAOY,YAH/C,UAIwB,aAD7BC,EAHK,QAIQC,KAAKC,QAAuD,YAA/BF,EAAeC,KAAKC,OAJzD,wBAKTC,EAAAA,EAAAA,GAAeH,GALN,SAMmBT,EAAiBJ,EAAOW,gBAN3C,OAOyB,aAD5BM,EANG,QAOSH,KAAKC,QAAsD,YAA9BE,EAAcH,KAAKC,OAChEG,YAAW,WACTb,GAASG,EAAAA,EAAAA,IAASC,EAAAA,KAClBV,EAAQ,CAAEgB,OAAQ,WACnB,GAAE,MAEHI,EAAAA,EAAAA,GAAWF,GAAe,GAbnB,yBAgBTE,EAAAA,EAAAA,GAAWN,GAAgB,GAhBlB,iDAmBkBX,EAAsBF,EAAOY,YAnB/C,QAqBwB,aAF7BC,EAnBK,QAqBQC,KAAKC,QAAuD,YAA/BF,EAAeC,KAAKC,SAClEC,EAAAA,EAAAA,GAAeH,GACfK,YAAW,WACTb,GAASG,EAAAA,EAAAA,IAASC,EAAAA,KAClBV,EAAQ,CAAEgB,OAAQ,WACnB,GAAE,OAEHI,EAAAA,EAAAA,GAAWN,GAAgB,GA5BlB,2DAgCbM,EAAAA,EAAAA,GAAW,EAAD,IAAQ,GAhCL,0DAAH,qDAoCd,OACE,gBAAKC,UAAU,iHAAf,UACE,iBAAKA,UAAS,oCAA+BC,GAA7C,WACE,SAAC,KAAD,CAAgBC,QAASf,KACzB,eAAIa,UAAU,oBAAd,sCACA,eAAIA,UAAU,UAEd,iBAAKA,UAAU,yDAAf,WACE,SAAC,MAAD,CAAeG,KAAM,GAAIC,MAAM,aAE/B,kBAAMJ,UAAU,mBAAhB,2EAGE,uCAHF,qBAKE,8CAIJ,eAAIA,UAAU,eACd,iBAAKA,UAAU,8BAAf,WACE,SAAC,KAAD,CAAQK,KAAK,SAASH,QAAS,kBAAMf,GAAN,EAA/B,oBACA,SAAC,KAAD,CAAQa,UAAU,cAAcE,QAAS,kBAAMZ,GAAN,EAAzC,6BAKT,C","sources":["webpack://filter-ticket/./src/pages/history_dashboard/ReopenModal.module.css?83e5","pages/history_dashboard/ReopenModal.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"modal-box-custom\":\"ReopenModal_modal-box-custom__carVy\",\"modal-open\":\"ReopenModal_modal-open__sfISW\",\"modal-toggle\":\"ReopenModal_modal-toggle__dKbrF\",\"modal\":\"ReopenModal_modal__Mjnea\",\"modal-bottom\":\"ReopenModal_modal-bottom__7fBvm\",\"modal-middle\":\"ReopenModal_modal-middle__nyUO+\",\"modal-box-2\":\"ReopenModal_modal-box-2__yR100\"};","import {\r\n  HiExclamation,\r\n} from 'react-icons/hi';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useComplainHistoryReopenMutation } from '../../store/features/complain_history/complainHistoryApiSlice';\r\nimport styles from './ReopenModal.module.css';\r\nimport { useDeleteRFOKeluhanMutation } from '../../store/features/rfo/rfoApiSlice';\r\nimport { initState, setModal } from '../../store/features/modal/modalSlice';\r\nimport catchError from '../../services/catchError';\r\nimport handleResponse from '../../services/handleResponse';\r\nimport { Button, ButtonIconExit } from '../../components/index';\r\n\r\nfunction ReopenModal({ stateModal, getInfo, detail }) {\r\n  const [complainHistoryReopen] = useComplainHistoryReopenMutation()\r\n  const [deleteRFOKeluhan] = useDeleteRFOKeluhanMutation();\r\n\r\n  const dispatch = useDispatch();\r\n  const onBtnClose = () => {\r\n    dispatch(setModal(initState));\r\n  };\r\n  const onSubmit = async () => {\r\n    try {\r\n      if (detail.rfo_keluhan_id !== null) {\r\n        const reopenComplain = await complainHistoryReopen(detail.id_keluhan);\r\n        if (reopenComplain.data.status === 'success' || reopenComplain.data.status === 'Success') {\r\n          handleResponse(reopenComplain);\r\n          const deleteKeluhan = await deleteRFOKeluhan(detail.rfo_keluhan_id);\r\n          if (deleteKeluhan.data.status === 'success' || deleteKeluhan.data.status === 'Success') {\r\n            setTimeout(() => {\r\n              dispatch(setModal(initState));\r\n              getInfo({ status: 'success' });\r\n            }, 2000);\r\n          } else {\r\n            catchError(deleteKeluhan, true);\r\n          }\r\n        } else {\r\n          catchError(reopenComplain, true);\r\n        }\r\n      } else {\r\n        const reopenComplain = await complainHistoryReopen(detail.id_keluhan);\r\n\r\n        if (reopenComplain.data.status === 'success' || reopenComplain.data.status === 'Success') {\r\n          handleResponse(reopenComplain);\r\n          setTimeout(() => {\r\n            dispatch(setModal(initState));\r\n            getInfo({ status: 'success' });\r\n          }, 2000);\r\n        } else {\r\n          catchError(reopenComplain, true);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      catchError(error, true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 pt-10 left-0 bottom-0 right-0 z-50 flex justify-center\">\r\n      <div className={`modal-box h-fit max-h-fit ${styles['modal-box-custom']}`}>\r\n        <ButtonIconExit onClick={onBtnClose} />\r\n        <h3 className=\"text-lg font-bold\">Konfirmasi Data Keluhan</h3>\r\n        <hr className=\"my-2\" />\r\n\r\n        <div className=\"flex flex-col justify-center align-middle items-center\">\r\n          <HiExclamation size={50} color=\"#FF2E00\" />\r\n\r\n          <span className=\"py-4 text-center\">\r\n            Apakah anda yakin mengembalikan status data keluhan dari\r\n            &nbsp;\r\n            <strong>closed</strong>\r\n            &nbsp; menjadi &nbsp;\r\n            <strong>open ?</strong>\r\n          </span>\r\n        </div>\r\n\r\n        <hr className=\"my-2 mt-5\" />\r\n        <div className=\"modal-action justify-center\">\r\n          <Button type=\"button\" onClick={() => onBtnClose()}>Batal</Button>\r\n          <Button className=\"btn-success\" onClick={() => onSubmit()}>Rollback</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReopenModal;"],"names":["stateModal","getInfo","detail","useComplainHistoryReopenMutation","complainHistoryReopen","useDeleteRFOKeluhanMutation","deleteRFOKeluhan","dispatch","useDispatch","onBtnClose","setModal","initState","onSubmit","rfo_keluhan_id","id_keluhan","reopenComplain","data","status","handleResponse","deleteKeluhan","setTimeout","catchError","className","styles","onClick","size","color","type"],"sourceRoot":""}