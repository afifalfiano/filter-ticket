"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[970],{47970:function(a,e,t){t.r(e),t.d(e,{default:function(){return g}});var s=t(74165),n=t(15861),l=t(1413),i=t(70885),r=t(95048),o=t(72791),d=t(28910),c=t(13852),u=t(55705),p=t(26968),m=t(41240),x=t(86017),h=t(89504),f=t(11803),v=t(19585),b=t(14450),j=t(80184);var _=function(a){var e=a.stateModal,t=a.getInfo,o=a.detail,d=a.titleAction,_=(0,c.bf)(),k=(0,i.Z)(_,1)[0],Z=(0,c.Kd)(),N=(0,i.Z)(Z,1)[0],g=(0,r.v9)(p.HF).data,w={nama_bts:(null===o||void 0===o?void 0:o.nama_bts)||"",deskripsi:(null===o||void 0===o?void 0:o.deskripsi)||"",nama_pic:(null===o||void 0===o?void 0:o.nama_pic)||"",nomor_pic:(null===o||void 0===o?void 0:o.nomor_pic)||"",lokasi:(null===o||void 0===o?void 0:o.lokasi)||"",pop_id:(null===o||void 0===o?void 0:o.pop_id)||"",kordinat:(null===o||void 0===o?void 0:o.kordinat)||""},B=(0,r.I0)(),C=function(a){var t=(0,l.Z)((0,l.Z)({},e),{},{bts:(0,l.Z)((0,l.Z)({},e.bts),{},{showAddModalBts:!1,showUpdateModalBts:!1,showDetailModalBts:!1})});B((0,h.cf)(t))},S=(0,r.v9)(m.Yq),P=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(e,t){var n;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n={nama_bts:e.nama_bts,deskripsi:e.deskripsi,nama_pic:e.nama_pic,nomor_pic:e.nomor_pic,lokasi:e.lokasi,pop_id:e.pop_id||1,kordinat:e.kordinat,user_id:g.id_user};try{null===o?M(n,t):y(n)}catch(s){(0,f.Z)(s,!0)}case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),y=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(e){var n;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N({id:o.id_bts,body:(0,l.Z)({},e)});case 2:"success"===(n=a.sent).data.status||"Success"===n.data.status?((0,v.Z)(n),setTimeout((function(){t({status:"success"}),C()}),2e3)):(0,f.Z)(n,!0);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),M=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(e,n){var i;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k((0,l.Z)({},e));case 2:"success"===(i=a.sent).data.status||"Success"===i.data.status?((0,v.Z)(i),setTimeout((function(){n(),C(),t({status:"success"})}),2e3)):(0,f.Z)(i,!0);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return(0,j.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,j.jsxs)("div",{className:"modal-box lg:h-fit h-auto max-h-fit max-w-xl",children:[(0,j.jsx)(b.b_,{onClick:C}),(0,j.jsxs)("h3",{className:"text-lg font-bold",children:[null===o&&"create"===d?"Tambah Base Transceiver Station":"update"===d&&"Ubah Base Transceiver Station","read"===d&&"Detail Base Transceiver Station"]}),(0,j.jsx)("hr",{className:"my-2"}),(0,j.jsx)(u.J9,{enableReinitialize:!0,initialValues:w,validationSchema:x.FL,onSubmit:function(a,e){var t=e.resetForm;P(a,t)},children:function(a){var e=a.values,t=a.errors,s=a.touched,n=(a.isSubmitting,a.isValid),l=(a.setFieldValue,a.handleBlur),i=a.handleChange;a.resetForm;return(0,j.jsxs)(u.l0,{children:[(0,j.jsxs)("div",{className:"form-control",children:[(0,j.jsx)("label",{htmlFor:"nama_bts",className:"label",children:(0,j.jsx)("span",{className:"label-text",children:" Nama BTS:"})}),(0,j.jsx)(u.gN,{id:"nama_bts",name:"nama_bts",placeholder:"Nama BTS",value:e.nama_bts,disabled:"read"===d,onBlur:l,onChange:i,className:"input input-md input-bordered  max-w-full"}),t.nama_bts&&s.nama_bts&&(0,j.jsx)(b.aH,{errors:t.nama_bts})]}),(0,j.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,j.jsxs)("div",{className:"form-control flex-1",children:[(0,j.jsx)("label",{htmlFor:"nama_pic",className:"label",children:(0,j.jsx)("span",{className:"label-text",children:" Nama PIC"})}),(0,j.jsx)(u.gN,{id:"nama_pic",name:"nama_pic",value:e.nama_pic,disabled:"read"===d,onBlur:l,onChange:i,placeholder:"Nama PIC",className:"input input-md input-bordered max-w-full"}),t.nama_pic&&s.nama_pic&&(0,j.jsx)(b.aH,{errors:t.nama_pic})]}),(0,j.jsxs)("div",{className:"form-control flex-1",children:[(0,j.jsx)("label",{htmlFor:"nomor_pic",className:"label",children:(0,j.jsx)("span",{className:"label-text",children:" Kontak PIC"})}),(0,j.jsx)(u.gN,{id:"nomor_pic",name:"nomor_pic",value:e.nomor_pic,disabled:"read"===d,placeholder:"Kontak PIC",onBlur:l,onChange:i,className:"input input-md input-bordered max-w-full"}),t.nomor_pic&&s.nomor_pic&&(0,j.jsx)(b.aH,{errors:t.nomor_pic})]})]}),(0,j.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,j.jsxs)("div",{className:"form-control flex-1",children:[(0,j.jsx)("label",{htmlFor:"lokasi",className:"label",children:(0,j.jsx)("span",{className:"label-text",children:" Alamat Lengkap"})}),(0,j.jsx)(u.gN,{id:"lokasi",name:"lokasi",value:e.lokasi,disabled:"read"===d,placeholder:"Alamat Lengkap",onBlur:l,onChange:i,className:"input input-md input-bordered max-w-full"}),t.lokasi&&s.lokasi&&(0,j.jsx)(b.aH,{errors:t.lokasi})]}),(0,j.jsxs)("div",{className:"form-control flex-1",children:[(0,j.jsx)("label",{htmlFor:"location",className:"label",children:(0,j.jsx)("span",{className:"label-text",children:" POP (Area Operasional)"})}),(0,j.jsxs)(u.gN,{component:"select",id:"pop_id",name:"pop_id",value:e.pop_id,disabled:"read"===d,onBlur:l,onChange:i,className:"select w-full max-w-full input-bordered",children:[(0,j.jsx)("option",{value:"",label:"Pilih POP",defaultValue:"",children:"Pilih POP"}),S.data.map((function(a,e){return(0,j.jsx)("option",{id:a.id_pop,value:a.id_pop,label:a.pop,children:a.pop},e)}))]}),t.pop_id&&s.pop_id&&(0,j.jsx)(b.aH,{errors:t.pop_id})]})]}),(0,j.jsxs)("div",{className:"form-control",children:[(0,j.jsx)("label",{htmlFor:"kordinat",className:"label",children:(0,j.jsx)("span",{className:"label-text",children:" Koordinat:"})}),(0,j.jsx)(u.gN,{id:"kordinat",name:"kordinat",placeholder:"Koordinat",value:e.kordinat,onBlur:l,onChange:i,disabled:"read"===d,className:"input input-md input-bordered max-w-full"}),t.kordinat&&s.kordinat&&(0,j.jsx)(b.aH,{errors:t.kordinat})]}),(0,j.jsxs)("div",{className:"form-control",children:[(0,j.jsx)("label",{htmlFor:"deskripsi",className:"label",children:(0,j.jsx)("span",{className:"label-text",children:" Deskripsi Base Transceiver Station:"})}),(0,j.jsx)(u.gN,{id:"deskripsi",component:"textarea",name:"deskripsi",placeholder:"Deskripsi Base Transceiver Station",value:e.deskripsi,disabled:"read"===d,onBlur:l,onChange:i,className:"input input-md input-bordered  max-w-full h-28"}),t.deskripsi&&s.deskripsi&&(0,j.jsx)(b.aH,{errors:t.deskripsi})]}),(0,j.jsx)("hr",{className:"my-2 mt-10"}),"read"!==d&&(0,j.jsxs)("div",{className:"modal-action justify-center",children:[(0,j.jsx)(b.zx,{type:"button",onClick:function(){return C()},children:"Batal"}),(0,j.jsx)(b.zx,{type:"submit",className:"btn-success",disabled:!n,children:"Simpan"})]}),"read"===d&&(0,j.jsx)("div",{className:"modal-action justify-center",children:(0,j.jsx)(b.zx,{type:"button",onClick:function(){return C()},children:"Kembali"})})]})}})]})})},k=t(76899),Z=t(26290),N=["No","POP","Nama","Penanggung Jawab","No Penanggung Jawab","Lokasi","Koordinat","Aksi"];var g=function(){var a,e,t,u,x=(0,o.useState)([]),v=(0,i.Z)(x,2),g=v[0],w=v[1],B=(0,o.useState)([]),C=(0,i.Z)(B,2),S=C[0],P=C[1],y=(0,o.useState)("all"),M=(0,i.Z)(y,2),T=M[0],F=M[1],H=(0,c.i7)(),A=(0,i.Z)(H,2),I=A[0],D=A[1].isLoading,O=(0,r.I0)(),z=(0,o.useState)(null),K=(0,i.Z)(z,2),L=K[0],R=K[1],U=(0,o.useState)(""),V=(0,i.Z)(U,2),J=V[0],Q=V[1],Y=(0,r.v9)(p.HF).data,E=(0,o.useState)("update"),q=(0,i.Z)(E,2),W=q[0],X=q[1],G=(0,r.v9)(d.Ok),$=(0,r.v9)(h.HH),aa=function(a){var e;"add bts"===a?e=(0,l.Z)((0,l.Z)({},$),{},{bts:(0,l.Z)((0,l.Z)({},$.bts),{},{showAddModalBts:!0})}):"update bts"===a?e=(0,l.Z)((0,l.Z)({},$),{},{bts:(0,l.Z)((0,l.Z)({},$.bts),{},{showUpdateModalBts:!0})}):"delete bts"===a?e=(0,l.Z)((0,l.Z)({},$),{},{bts:(0,l.Z)((0,l.Z)({},$.bts),{},{showDeleteModalBts:!0})}):"detail bts"===a&&(e=(0,l.Z)((0,l.Z)({},$),{},{bts:(0,l.Z)((0,l.Z)({},$.bts),{},{showDetailModalBts:!0})})),O((0,h.cf)(e)),window.scrollTo(0,0)},ea=(0,o.useState)(1),ta=(0,i.Z)(ea,2),sa=ta[0],na=ta[1],la=(0,o.useState)([5]),ia=(0,i.Z)(la,2),ra=ia[0],oa=ia[1],da=(0,o.useState)([1]),ca=(0,i.Z)(da,2),ua=ca[0],pa=ca[1],ma=(0,k.HY)(),xa=(0,i.Z)(ma,1)[0],ha=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(){var e;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,xa().unwrap();case 3:"success"===(e=a.sent).status||"Success"===e.status?(O((0,m.pk)((0,l.Z)({},e))),P(e.data)):(0,f.Z)(e,!0),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),(0,f.Z)(a.t0,!0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}(),fa=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(){var e,t,n,l,i,r,o=arguments;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,t="?page=".concat(e),a.prev=2,a.next=5,I(t).unwrap();case 5:if("success"===(n=a.sent).status||"Success"===n.status){for(l=n.data.data,O((0,d.QR)({data:l})),w(l),na(n.data.current_page),oa([n.data.per_page]),i=[],r=0;r<n.data.last_page;r++)i.push(r+1);pa(i)}else w([]),(0,f.Z)(n,!0);a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),w([]),(0,f.Z)(a.t0,!0);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(){return a.apply(this,arguments)}}();(0,o.useEffect)((function(){O((0,Z.oi)([{path:"/base_transceiver_station",title:"Base Transceiver Station"}])),ha(),fa()}),[]);var va=function(a){"success"===a.status&&fa()},ba=function(a){R(a),X("read"),aa("detail bts")};return(0,j.jsxs)("div",{children:[0===(null===Y||void 0===Y?void 0:Y.role_id)&&(0,j.jsx)("div",{children:(0,j.jsx)(b.zx,{type:"button",onClick:function(){return R(null),X("create"),void aa("add bts")},children:"Tambah"})}),!D&&(0,j.jsxs)("div",{className:"gap-5 mt-5 flex flex-col md:flex md:flex-row",children:[(0,j.jsx)("div",{className:"form-control w-full md:w-52",children:(0,j.jsx)(b.Co,{dataPOP:S,handlePOP:function(a){F(a.target.value);var e=G.data.filter((function(e){if(+e.pop_id===+a.target.value)return e}));"all"===a.target.value?w(G.data):w(e)}})}),(0,j.jsx)(b.ol,{search:J,onHandleSearch:function(a){if(a.preventDefault(),Q(a.target.value),a.target.value.length>0){var e=new RegExp(J,"ig"),t=G.data.filter((function(a){return+a.pop.id_pop===+T&&(a.nama_bts.match(e)||a.nama_pic.match(e))||"all"===T&&(a.nama_bts.match(e)||a.nama_pic.match(e))?a:void 0}));w(t)}else w(G.data.filter((function(a){return+a.pop.id_pop===+T||"all"===T?a:void 0})))},placeholder:"Cari data BTS..."})]}),(0,j.jsxs)(b.u_,{children:[(null===$||void 0===$||null===(a=$.bts)||void 0===a?void 0:a.showAddModalBts)&&(0,j.jsx)(_,{stateModal:$,getInfo:va,detail:L,titleAction:W}),(null===$||void 0===$||null===(e=$.bts)||void 0===e?void 0:e.showUpdateModalBts)&&(0,j.jsx)(_,{stateModal:$,getInfo:va,detail:L,titleAction:W}),(null===$||void 0===$||null===(t=$.bts)||void 0===t?void 0:t.showDeleteModalBts)&&(0,j.jsx)(b.pf,{stateModal:$,getInfo:va,detail:L,title:"BTS"}),(null===$||void 0===$||null===(u=$.bts)||void 0===u?void 0:u.showDetailModalBts)&&(0,j.jsx)(_,{stateModal:$,getInfo:va,detail:L,titleAction:W})]}),D&&(0,j.jsx)(b.cY,{countRows:8,countColumns:10,totalFilter:2}),!D&&(0,j.jsx)("div",{className:"overflow-x-auto mt-8",children:(0,j.jsxs)("table",{className:"table table-zebra w-full",children:[(0,j.jsx)("thead",{children:(0,j.jsx)("tr",{children:N.map((function(a,e){return(0,j.jsx)("th",{className:"text-center",children:a},e)}))})}),(0,j.jsx)("tbody",{children:g.map((function(a,e){var t;return(0,j.jsxs)("tr",{className:"text-center",id:a.id,children:[(0,j.jsx)("td",{id:a.id,children:e+1}),(0,j.jsx)("td",{children:(0,j.jsx)(b.Xv,{status:null===a||void 0===a||null===(t=a.pop)||void 0===t?void 0:t.pop})}),(0,j.jsx)("td",{children:a.nama_bts}),(0,j.jsx)("td",{children:a.nama_pic}),(0,j.jsx)("td",{children:a.nomor_pic}),(0,j.jsx)("td",{children:a.lokasi}),(0,j.jsx)("td",{children:a.kordinat}),(0,j.jsx)("td",{children:0===(null===Y||void 0===Y?void 0:Y.role_id)?(0,j.jsxs)("div",{className:"flex flex-row gap-3 justify-center",children:[(0,j.jsx)(b.W,{onClick:function(){return function(a){R(a),X("update"),aa("update bts")}(a)}}),(0,j.jsx)(b.Zt,{onClick:function(){return function(a){R(a),aa("delete bts")}(a)}}),(0,j.jsx)(b.CQ,{onClick:function(){return ba(a)}})]}):(0,j.jsx)(b.CQ,{onClick:function(){return ba(a)}})})]},e)}))})]})}),!D&&(0,j.jsx)(b.tl,{perPage:ra,currentPage:sa,countPage:ua,onClick:function(a){return fa(a.target.id)},serverMode:!0})]})}}}]);
//# sourceMappingURL=970.3dde7988.chunk.js.map