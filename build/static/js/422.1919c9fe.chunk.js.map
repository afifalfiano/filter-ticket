{"version":3,"file":"static/js/422.1919c9fe.chunk.js","mappings":"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","sources":["webpack://filter-ticket/./src/pages/dashboard/modal/RFOMasalModal.module.css?caf9","pages/dashboard/modal/RFOMasalModal.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"modal-box-custom\":\"RFOMasalModal_modal-box-custom__YUTSm\",\"modal-open\":\"RFOMasalModal_modal-open__DYaOJ\",\"modal-toggle\":\"RFOMasalModal_modal-toggle__dh-Bx\",\"modal\":\"RFOMasalModal_modal__sd1BA\",\"modal-bottom\":\"RFOMasalModal_modal-bottom__6AaNT\",\"modal-middle\":\"RFOMasalModal_modal-middle__8gQx5\",\"modal-box-2\":\"RFOMasalModal_modal-box-2__bN9r7\"};","import { Formik, Field, Form } from 'formik';\r\nimport { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport styles from './RFOMasalModal.module.css';\r\nimport { useAllRFOMasalMutation, useUpdateKeluhanRFOGangguanMutation } from '../../../store/features/rfo/rfoApiSlice';\r\nimport { setRFOMasal } from '../../../store/features/rfo/rfoSlice';\r\nimport { RFOMasalFormSchema } from '../../../utils/schema_validation_form';\r\nimport { useComplainClosedMutation } from '../../../store/features/complain/complainApiSlice';\r\nimport { setModal } from '../../../store/features/modal/modalSlice';\r\nimport handleResponse from '../../../services/handleResponse';\r\nimport catchError from '../../../services/catchError';\r\nimport { ButtonIconExit, Button } from '../../../components';\r\n\r\nfunction RFOMasalModal({ stateModal, getInfo, detail }) {\r\n  const [allRFOMasal] = useAllRFOMasalMutation()\r\n  const [updateKeluhanRFOGangguan] = useUpdateKeluhanRFOGangguanMutation()\r\n  const [complainClosed] = useComplainClosedMutation()\r\n  const dispatch = useDispatch()\r\n  const [dataRFOMasal, setDataRFOMasal] = useState([])\r\n\r\n  const onBtnClose = () => {\r\n    const newState = {\r\n      ...stateModal,\r\n      dashboard: { ...stateModal.dashboard, showRFOTroubleModal: false },\r\n    };\r\n    dispatch(setModal(newState));\r\n  };\r\n  const doGetAllRFOMasal = async (page = 1) => {\r\n    const param = `?page=${page}`;\r\n    try {\r\n      const data = await allRFOMasal(param).unwrap();\r\n      if (data.status === 'success' || data.status === 'Success') {\r\n        const result = data.data.data;\r\n        dispatch(setRFOMasal({ data: result }))\r\n        setDataRFOMasal([...result]);\r\n      } else {\r\n        catchError(data, true);\r\n      }\r\n    } catch (error) {\r\n      catchError(error, true);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    doGetAllRFOMasal();\r\n  }, [])\r\n\r\n  const onSubmitData = async (payload) => {\r\n    try {\r\n      // create\r\n      const body = {\r\n        rfo_gangguan_id: payload.rfo_gangguan\r\n      };\r\n      const data = await updateKeluhanRFOGangguan({ id: detail.id_keluhan, body });\r\n      if (data.data.status === 'success' || data.data.status === 'Success') {\r\n        handleResponse(data);\r\n        const closed = await complainClosed(detail.id_keluhan);\r\n        if (closed?.data?.status === 'success' || closed?.data?.status === 'Success') {\r\n          handleResponse(closed);\r\n          setTimeout(async () => {\r\n            onBtnClose();\r\n            getInfo({ status: 'success' });\r\n          }, 1000)\r\n        } else {\r\n          catchError(closed, true);\r\n        }\r\n      } else {\r\n        catchError(data, true);\r\n      }\r\n    } catch (error) {\r\n      catchError(error, true);\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 pt-10 left-0 bottom-0 right-0 z-50 flex justify-center\">\r\n      <div className={`modal-box h-fit max-h-fit ${styles['modal-box-custom']}`}>\r\n        <ButtonIconExit onClick={onBtnClose} />\r\n        <h3 className=\"text-lg font-bold\">Reason For Outage Gangguan</h3>\r\n        <hr className=\"my-2\" />\r\n\r\n        <div className=\"w-full py-5 px-5 flex w-min-full bg-blue-200 rounded-md mt-5\">\r\n          <div className=\"w-full\">\r\n            <table className=\"border-none items-center w-full\">\r\n              <tbody>\r\n                <tr className=\"text-left\">\r\n                  <td>Referensi Keluhan</td>\r\n                  <td>:</td>\r\n                  <td>{detail?.nomor_keluhan}</td>\r\n                </tr>\r\n                <tr className=\"text-left\">\r\n                  <td>Pelanggan</td>\r\n                  <td>:</td>\r\n                  <td>{detail?.id_pelanggan} - {detail?.nama_pelanggan}</td>\r\n                </tr>\r\n                <tr className=\"text-left\">\r\n                  <td>Kontak</td>\r\n                  <td>:</td>\r\n                  <td>{detail?.nama_pelapor} - {detail?.nomor_pelapor}</td>\r\n                </tr>\r\n                <tr className=\"text-left\">\r\n                  <td>Waktu Dibuat</td>\r\n                  <td>:</td>\r\n                  <td>{new Date(detail?.created_at).toLocaleString('id-ID')}</td>\r\n                </tr>\r\n                <tr className=\"text-left\">\r\n                  <td>Waktu Diubah</td>\r\n                  <td>:</td>\r\n                  <td>\r\n                    {detail?.balasan.length > 0\r\n                      ? new Date(detail?.balasan[detail.balasan.length - 1]?.created_at).toLocaleString('id-ID')\r\n                      : new Date(detail?.created_at).toLocaleString('id-ID')}\r\n                  </td>\r\n                </tr>\r\n                <tr className=\"text-left\">\r\n                  <td>Status Keluhan</td>\r\n                  <td>:</td>\r\n                  <td>{detail?.status}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        <Formik\r\n          enableReinitialize\r\n          validationSchema={RFOMasalFormSchema}\r\n          initialValues={{ rfo_gangguan: '' }}\r\n          onSubmit={(values, { resetForm }) => {\r\n            onSubmitData(values);\r\n          }}\r\n        >\r\n          {({\r\n            values,\r\n            errors,\r\n            touched,\r\n            isValid,\r\n            handleChange,\r\n            handleBlur,\r\n          }) => (\r\n            <Form>\r\n              <div className=\"mt-2\">\r\n                <div className=\"form-control\">\r\n                  <label htmlFor=\"rfo_gangguan\" className=\"label\">\r\n                    <span className=\"label-text\"> Topik RFO Gangguan Masal</span>\r\n                  </label>\r\n\r\n                  <Field\r\n                    component=\"select\"\r\n                    id=\"rfo_gangguan\"\r\n                    name=\"rfo_gangguan\"\r\n                    onBlur={handleBlur}\r\n                    onChange={handleChange}\r\n                    value={values.rfo_gangguan}\r\n                    className=\"select w-full max-w-full input-bordered\"\r\n                  >\r\n                    <option value=\"\">Pilih RFO Gangguan</option>\r\n                    {dataRFOMasal?.map((item, index) => (\r\n                      <option key={index} value={item.id_rfo_gangguan} label={item.problem}>{item.problem}</option>\r\n                    ))}\r\n                  </Field>\r\n                  {errors.rfo_gangguan && touched.rfo_gangguan ? (\r\n                    <div className=\"label label-text text-red-500\">{errors.rfo_gangguan}</div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n\r\n              <hr className=\"my-2 mt-5\" />\r\n              <div className=\"modal-action justify-center\">\r\n                <Button type=\"button\" onClick={() => onBtnClose()}>Batal</Button>\r\n                <Button type=\"submit\" disabled={!isValid} className=\"btn-success\">Simpan</Button>\r\n              </div>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RFOMasalModal;"],"names":["stateModal","getInfo","detail","useAllRFOMasalMutation","allRFOMasal","useUpdateKeluhanRFOGangguanMutation","updateKeluhanRFOGangguan","useComplainClosedMutation","complainClosed","dispatch","useDispatch","useState","dataRFOMasal","setDataRFOMasal","onBtnClose","newState","dashboard","showRFOTroubleModal","setModal","doGetAllRFOMasal","page","param","unwrap","data","status","result","setRFOMasal","catchError","useEffect","onSubmitData","payload","body","rfo_gangguan_id","rfo_gangguan","id","id_keluhan","handleResponse","closed","setTimeout","className","styles","onClick","nomor_keluhan","id_pelanggan","nama_pelanggan","nama_pelapor","nomor_pelapor","Date","created_at","toLocaleString","balasan","length","enableReinitialize","validationSchema","RFOMasalFormSchema","initialValues","onSubmit","values","resetForm","errors","touched","isValid","handleChange","handleBlur","htmlFor","component","name","onBlur","onChange","value","map","item","index","id_rfo_gangguan","label","problem","type","disabled"],"sourceRoot":""}