"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[197],{78197:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var a=r(74165),n=r(15861),l=r(1413),s=r(70885),o=r(95048),i=r(72791),c=r(26290),u=r(2512),d=r(15738),f=r(55705),h=r(26968),x=r(86017),v=r(89504),m=r(11803),p=r(19585),g=r(14450),Z=r(80184);var j=function(e){var t=e.stateModal,r=e.getInfo,i=e.detail,c=e.titleAction,d=(0,u.zY)(),j=(0,s.Z)(d,1)[0],b=(0,u.j9)(),N=(0,s.Z)(b,1)[0],w=(0,o.v9)(h.HF).data,P={role:(null===i||void 0===i?void 0:i.role)||""},k=(0,o.I0)(),y=function(){var e=(0,l.Z)((0,l.Z)({},t),{},{role:(0,l.Z)((0,l.Z)({},t.role),{},{showAddModalRole:!1,showUpdateModalRole:!1})});k((0,v.cf)(e))},M=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={id_role:Math.floor(90*Math.random()+10),role:t.role,user_id:w.id_user};try{null===i?R(n,r):F(n)}catch(a){(0,m.Z)(a,!0)}case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),F=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({id:i.id_role,body:(0,l.Z)((0,l.Z)({},t),{},{id_role:i.id_role})});case 2:"success"===(n=e.sent).data.status||"Success"===n.data.status?((0,p.Z)(n),setTimeout((function(){r({status:"success"}),y()}),2e3)):(0,m.Z)(n,!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t,n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j((0,l.Z)({},t));case 2:"success"===(s=e.sent).data.status||"Success"===s.data.status?((0,p.Z)(s),setTimeout((function(){n(),y(),r({status:"success"})}),2e3)):(0,m.Z)(s,!0);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),C=function(e){e(),y()};return(0,Z.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,Z.jsxs)("div",{className:"modal-box mt-5  h-fit max-h-fit  max-w-lg",children:[(0,Z.jsx)(g.b_,{onClick:y}),(0,Z.jsxs)("h3",{className:"text-lg font-bold",children:[null===i&&"create"===c?"Tambah Role":"update"===c&&"Ubah Role","read"===c&&"Detail Role"]}),(0,Z.jsx)("hr",{className:"my-2"}),(0,Z.jsx)(f.J9,{enableReinitialize:!0,initialValues:P,validationSchema:x.Ue,onSubmit:function(e,t){var r=t.resetForm;M(e,r)},children:function(e){var t=e.values,r=e.errors,a=e.touched,n=e.isValid,l=e.handleBlur,s=e.handleChange,o=e.resetForm;return(0,Z.jsxs)(f.l0,{children:[(0,Z.jsxs)("div",{className:"form-control",children:[(0,Z.jsx)("label",{htmlFor:"role",className:"label",children:(0,Z.jsx)("span",{className:"label-text",children:" Nama role:"})}),(0,Z.jsx)(f.gN,{id:"role",name:"role",placeholder:"Nama Role",value:t.role,disabled:"read"===c,onBlur:l,onChange:s,className:"input input-md input-bordered  max-w-full"}),r.role&&a.role&&(0,Z.jsx)(g.aH,{errors:r.role})]}),(0,Z.jsx)("hr",{className:"my-2 mt-10"}),"read"!==c&&(0,Z.jsxs)("div",{className:"modal-action justify-center",children:[(0,Z.jsx)(g.zx,{type:"button",onClick:function(){return C(o)},children:"Batal"}),(0,Z.jsx)(g.zx,{type:"submit",className:"btn-success",disabled:!n,children:"Simpan"})]}),"read"===c&&(0,Z.jsx)("div",{className:"modal-action justify-center",children:(0,Z.jsx)(g.zx,{type:"button",onClick:function(){return C(o)},children:"Kembali"})})]})}})]})})},b=["No","Nama","Aksi"];var N=function(){var e,t,r,f=(0,o.I0)(),h=(0,i.useState)([]),x=(0,s.Z)(h,2),p=x[0],N=x[1],w=(0,u.LN)(),P=(0,s.Z)(w,2),k=P[0],y=P[1].isLoading,M=(0,i.useState)(null),F=(0,s.Z)(M,2),R=F[0],C=F[1],S=(0,i.useState)(""),_=(0,s.Z)(S,2),z=_[0],A=_[1],I=(0,i.useState)("update"),T=(0,s.Z)(I,2),H=T[0],U=T[1],B=(0,o.v9)(d.n5),D=(0,o.v9)(v.HH),E=function(e){var t;"add role"===e?t=(0,l.Z)((0,l.Z)({},D),{},{role:(0,l.Z)((0,l.Z)({},D.role),{},{showAddModalRole:!0})}):"update role"===e?t=(0,l.Z)((0,l.Z)({},D),{},{role:(0,l.Z)((0,l.Z)({},D.role),{},{showUpdateModalRole:!0})}):"delete role"===e&&(t=(0,l.Z)((0,l.Z)({},D),{},{role:(0,l.Z)((0,l.Z)({},D.role),{},{showDeleteModalRole:!0})})),f((0,v.cf)(t)),window.scrollTo(0,0)},L=(0,i.useState)({currentPage:1,currentFilterPage:10,pageNumbers:[1],filterPage:[5,10,25,50,100]}),V=(0,s.Z)(L,2),Y=V[0],J=V[1],K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;J((0,l.Z)((0,l.Z)({},Y),{},{currentPage:e,currentFilterPage:Y.currentFilterPage}));var r,a=e*Y.currentFilterPage,n=a-Y.currentFilterPage;r=void 0===t?null===B||void 0===B?void 0:B.data.slice(n,a):t.slice(n,a),N(r)},W=function(e){for(var t=[],r=1;r<=Math.ceil(e.length/Y.currentFilterPage);r++)t.push(r);J((0,l.Z)((0,l.Z)({},Y),{},{pageNumbers:t}))},q=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().unwrap();case 3:"success"===(t=e.sent).status||"Success"===t.status?(f((0,d.g4)((0,l.Z)({},t))),N(t.data),K(1,t.data),W(t.data)):(N([]),(0,m.Z)(t,!0)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),N([]),(0,m.Z)(e.t0,!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(e){"success"===e.status&&q()};return(0,i.useEffect)((function(){f((0,c.oi)([{path:"/role",title:"Pengaturan Role"}])),q()}),[]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(g.zx,{type:"button",onClick:function(){return C(null),U("create"),void E("add role")},children:"Tambah"})}),!y&&(0,Z.jsx)("div",{className:"gap-5 mt-5 flex flex-col md:flex md:flex-row",children:(0,Z.jsx)(g.ol,{search:z,onHandleSearch:function(e){if(A(e.target.value),e.target.value.length>0){var t=new RegExp(z,"ig"),r=B.data.filter((function(e){return e.role.match(t)}));N(r),J({currentPage:1,currentFilterPage:100,pageNumbers:[1],filterPage:[5,10,25,50,100]})}else N(B.data),J({currentPage:1,currentFilterPage:100,pageNumbers:[1],filterPage:[5,10,25,50,100]})},placeholder:"Cari data otoritas..."})}),(0,Z.jsxs)(g.u_,{children:[(null===D||void 0===D||null===(e=D.role)||void 0===e?void 0:e.showAddModalRole)&&(0,Z.jsx)(j,{stateModal:D,getInfo:G,detail:R,titleAction:H}),(null===D||void 0===D||null===(t=D.role)||void 0===t?void 0:t.showUpdateModalRole)&&(0,Z.jsx)(j,{stateModal:D,getInfo:G,detail:R,titleAction:H}),(null===D||void 0===D||null===(r=D.role)||void 0===r?void 0:r.showDeleteModalRole)&&(0,Z.jsx)(g.pf,{stateModal:D,getInfo:G,detail:R,title:"Team"})]}),y&&(0,Z.jsx)(g.cY,{countRows:8,countColumns:10,totalFilter:1}),!y&&(0,Z.jsx)("div",{className:"overflow-x-auto mt-8",children:(0,Z.jsxs)("table",{className:"table table-zebra w-full",children:[(0,Z.jsx)("thead",{children:(0,Z.jsx)("tr",{children:b.map((function(e,t){return(0,Z.jsx)("th",{className:"text-center",children:e},t)}))})}),(0,Z.jsx)("tbody",{children:p.map((function(e,t){return(0,Z.jsxs)("tr",{className:"text-center",children:[(0,Z.jsx)("td",{id:e.id,children:t+1}),(0,Z.jsx)("td",{className:"capitalize",children:e.role}),(0,Z.jsx)("td",{children:(0,Z.jsxs)("div",{className:"flex flex-row gap-3 justify-center",children:[(0,Z.jsx)(g.W,{onClick:function(){return function(e){C(e),U("update"),E("update role")}(e)}}),(0,Z.jsx)(g.Zt,{onClick:function(){return function(e){C(e),E("delete role")}(e)}})]})})]},t)}))})]})}),!y&&(0,Z.jsx)(g.tl,{serverMode:!1,currentFilterPage:Y.currentFilterPage,perPage:Y.filterPage,currentPage:Y.currentPage,countPage:Y.pageNumbers,onClick:function(e){return K(e.target.id,void 0)},handlePerPage:function(e){return function(e){var t=Y.currentPage*e,r=t-e,a=null===B||void 0===B?void 0:B.data.slice(r,t);N(a);for(var n=[],s=1;s<=Math.ceil(B.data.length/e);s++)n.push(s);J((0,l.Z)((0,l.Z)({},Y),{},{pageNumbers:n,currentFilterPage:e}))}(e.target.value)}})]})}}}]);
//# sourceMappingURL=197.558343f7.chunk.js.map