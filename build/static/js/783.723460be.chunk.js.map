{"version":3,"file":"static/js/783.723460be.chunk.js","mappings":"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","sources":["pages/reason_of_outage/ReasonOfOutage.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport catchError from '../../services/catchError';\r\nimport { updateBreadcrumb } from '../../store/features/breadcrumb/breadcrumbSlice';\r\nimport {\r\n  useAllRFOMutation,\r\n} from '../../store/features/rfo/rfoApiSlice';\r\nimport {\r\n  selectAllRFO,\r\n  setRFO,\r\n} from '../../store/features/rfo/rfoSlice';\r\nimport { CategoryRFO, DoDetail, DoUpdate, Search, SkeletonTable, Pagination } from '../../components';\r\n\r\nconst columns = [\r\n  'No',\r\n  'Pelanggan',\r\n  'Waktu Gangguan',\r\n  'Durasi',\r\n  'Masalah',\r\n  'Keterangan',\r\n  'Status RFO',\r\n  'Aksi',\r\n];\r\n\r\nfunction ReasonOfOutage() {\r\n  const [statusData, setStatusData] = useState('sendiri');\r\n  const navigate = useNavigate();\r\n  const [rows, setRows] = useState([]);\r\n  const dispatch = useDispatch();\r\n  const [allRFO, { isLoading }] = useAllRFOMutation();\r\n  const allData = useSelector(selectAllRFO);\r\n  const [search, setSearch] = useState('');\r\n\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [perPage, setPerPage] = useState([5]);\r\n  const [countPage, setCountPage] = useState([1]);\r\n\r\n  const getAllRFO = async (page = 1) => {\r\n    const param = `?page=${page}`;\r\n    try {\r\n      const data = await allRFO(param).unwrap();\r\n      if (data.status === 'success' || data.status === 'Success') {\r\n        const result = data.data.data;\r\n        dispatch(setRFO({ data: result }));\r\n        setRows(result);\r\n        setCurrentPage(data.data.current_page);\r\n        setPerPage([data.data.per_page]);\r\n\r\n        const countPaginate = [];\r\n        for (let i = 0; i < data.data.last_page; i++) {\r\n          countPaginate.push(i + 1);\r\n        }\r\n        setCountPage(countPaginate);\r\n      } else {\r\n        setRows([]);\r\n        catchError(data, true);\r\n      }\r\n    } catch (err) {\r\n      setRows([]);\r\n      catchError(err, true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      updateBreadcrumb([\r\n        { path: '/reason_of_outage', title: 'Reason For Outage Keluhan' },\r\n      ])\r\n    );\r\n    setStatusData('sendiri');\r\n    getAllRFO();\r\n  }, []);\r\n\r\n  const onHandleSearch = (event) => {\r\n    event.preventDefault();\r\n    setSearch(event.target.value);\r\n\r\n    if (event.target.value.length > 0) {\r\n      const regex = new RegExp(search, 'ig');\r\n      const searchResult = allData.filter((item) => {\r\n        if (item.problem.match(regex) || item?.keluhan?.nama_pelanggan.match(regex) || item?.keluhan?.id_pelanggan.match(regex)) {\r\n          return item;\r\n        }\r\n      });\r\n      setRows(searchResult);\r\n    } else {\r\n      const searchResult = allData.filter((item) => {\r\n        return item;\r\n      });\r\n      setRows(searchResult);\r\n    }\r\n  }\r\n\r\n  const detailData = (item) => {\r\n    navigate(\r\n      `/reason_of_outage/detail_single/${item.id_rfo_keluhan}`\r\n    );\r\n  }\r\n\r\n  const updateData = (item) => {\r\n    navigate(\r\n      `/reason_of_outage/detail_single/${item.id_rfo_keluhan}?edit=true`\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!isLoading && (\r\n        <div className=\"flex gap-5 flex-col md:flex md:flex-row\">\r\n          <div className=\"form-control w-full md:w-52\">\r\n            <CategoryRFO defaultValue={statusData} data={<option value=\"sendiri\" label=\"RFO Keluhan\">RFO Keluhan</option>} />\r\n          </div>\r\n\r\n          <Search search={search} onHandleSearch={onHandleSearch} placeholder={'Cari data RFO keluhan...'} />\r\n        </div>\r\n      )}\r\n\r\n      {isLoading && <SkeletonTable countRows={8} countColumns={10} totalFilter={2} />}\r\n\r\n      {/* start table */}\r\n      {!isLoading && (\r\n        <div className=\"overflow-x-auto mt-8\">\r\n          <table className=\"table table-zebra w-full\">\r\n            <thead>\r\n              <tr>\r\n                {columns.map((item, index) => (\r\n                  <th key={index} className=\"text-center\">{item}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {rows.map((item, index) => (\r\n                <tr className=\"text-center\" key={index}>\r\n                  <th>{index + 1}</th>\r\n                  <td>\r\n                    {item?.keluhan?.id_pelanggan} - {item?.keluhan?.nama_pelanggan}\r\n                  </td>\r\n                  <td className=\"text-left\">\r\n                    <p>\r\n                      Dibuat:\r\n                      {new Date(item?.mulai_keluhan).toLocaleString()}\r\n                    </p>\r\n                    <p>\r\n                      Diubah:\r\n                      {new Date(item?.selesai_keluhan).toLocaleString()}\r\n                    </p>\r\n                  </td>\r\n                  <td>{item?.durasi || 0}</td>\r\n                  <td>{item?.problem}</td>\r\n                  <td>{item?.deskripsi || '-'}</td>\r\n                  <td>\r\n                    <span className=\"badge badge-info text-white\">\r\n                      closed\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"flex flex-row gap-3 justify-center\">\r\n                      <DoUpdate onClick={() => updateData(item)} />\r\n                      <DoDetail onClick={() => detailData(item)} />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {!isLoading && (<Pagination perPage={perPage} currentPage={currentPage} countPage={countPage} onClick={(i) => getAllRFO(i.target.id)} serverMode />)}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReasonOfOutage;\r\n"],"names":["columns","useState","statusData","setStatusData","navigate","useNavigate","rows","setRows","dispatch","useDispatch","useAllRFOMutation","allRFO","isLoading","allData","useSelector","selectAllRFO","search","setSearch","currentPage","setCurrentPage","perPage","setPerPage","countPage","setCountPage","getAllRFO","page","param","unwrap","data","status","result","setRFO","current_page","per_page","countPaginate","i","last_page","push","catchError","useEffect","updateBreadcrumb","path","title","className","defaultValue","value","label","onHandleSearch","event","preventDefault","target","length","regex","RegExp","searchResult","filter","item","problem","match","keluhan","nama_pelanggan","id_pelanggan","placeholder","countRows","countColumns","totalFilter","map","index","Date","mulai_keluhan","toLocaleString","selesai_keluhan","durasi","deskripsi","onClick","id_rfo_keluhan","updateData","detailData","id","serverMode"],"sourceRoot":""}