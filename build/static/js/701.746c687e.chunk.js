"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[701],{33701:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var a=r(74165),n=r(15861),s=r(1413),c=r(70885),u=r(95048),l=r(72791),i=r(26290),o=r(4979),d=r(37034),m=r(55705),f=r(26968),h=r(86017),p=r(89504),x=r(11803),v=r(19585),b=r(14450),g=r(80184);var Z=function(e){var t=e.stateModal,r=e.getInfo,l=e.detail,i=e.titleAction,d=(0,o.gE)(),Z=(0,c.Z)(d,1)[0],j=(0,o.iY)(),w=(0,c.Z)(j,1)[0],N=(0,u.v9)(f.HF).data,P={sumber:(null===l||void 0===l?void 0:l.sumber)||""},S=(0,u.I0)(),_=function(){var e=(0,s.Z)((0,s.Z)({},t),{},{source_complain:(0,s.Z)((0,s.Z)({},t.source_complain),{},{showAddModalSourceComplain:!1,showUpdateModalSourceComplain:!1})});S((0,p.cf)(e))},C=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={id_sumber:Math.floor(90*Math.random()+10),sumber:t.sumber,user_id:N.id_user};try{null===l?k(n,r):y(n)}catch(a){(0,x.Z)(a,!0)}case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t,n){var c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z((0,s.Z)({},t));case 2:"success"===(c=e.sent).data.status||"Success"===c.data.status?((0,v.Z)(c),setTimeout((function(){n(),_(),r({status:"success"})}),2e3)):(0,x.Z)(c,!0);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({id:l.id_sumber,body:(0,s.Z)((0,s.Z)({},t),{},{id_sumber:l.id_sumber})});case 2:"success"===(n=e.sent).data.status||"Success"===n.data.status?((0,v.Z)(n),setTimeout((function(){r({status:"success"}),_()}),2e3)):(0,x.Z)(n,!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){e(),_()};return(0,g.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,g.jsxs)("div",{className:"modal-box mt-5  h-fit max-h-fit  max-w-lg",children:[(0,g.jsx)(b.b_,{onClick:_}),(0,g.jsxs)("h3",{className:"text-lg font-bold",children:[null===l&&"create"===i?"Tambah Sumber":"update"===i&&"Ubah Sumber","read"===i&&"Detail Sumber"]}),(0,g.jsx)("hr",{className:"my-2"}),(0,g.jsx)(m.J9,{enableReinitialize:!0,initialValues:P,validationSchema:h.hU,onSubmit:function(e,t){var r=t.resetForm;C(e,r)},children:function(e){var t=e.values,r=e.errors,a=e.touched,n=e.isValid,s=e.handleBlur,c=e.handleChange,u=e.resetForm;return(0,g.jsxs)(m.l0,{children:[(0,g.jsxs)("div",{className:"form-control",children:[(0,g.jsx)("label",{htmlFor:"sumber",className:"label",children:(0,g.jsx)("span",{className:"label-text",children:" Nama Sumber:"})}),(0,g.jsx)(m.gN,{id:"sumber",name:"sumber",placeholder:"Nama Sumber",value:t.sumber,disabled:"read"===i,onBlur:s,onChange:c,className:"input input-md input-bordered  max-w-full"}),r.sumber&&a.sumber&&(0,g.jsx)(b.aH,{errors:r.sumber})]}),(0,g.jsx)("hr",{className:"my-2 mt-10"}),"read"!==i&&(0,g.jsxs)("div",{className:"modal-action justify-center",children:[(0,g.jsx)(b.zx,{type:"button",onClick:function(){return F(u)},children:"Batal"}),(0,g.jsx)(b.zx,{type:"submit",className:"btn-success",disabled:!n,children:"Simpan"})]}),"read"===i&&(0,g.jsx)("div",{className:"modal-action justify-center",children:(0,g.jsx)(b.zx,{type:"button",onClick:function(){return F(u)},children:"Kembali"})})]})}})]})})},j=["No","Nama","Aksi"];var w=function(){var e,t,r,m=(0,u.I0)(),f=(0,l.useState)([]),h=(0,c.Z)(f,2),v=h[0],w=h[1],N=(0,o.pF)(),P=(0,c.Z)(N,2),S=P[0],_=P[1].isLoading,C=(0,l.useState)(null),k=(0,c.Z)(C,2),y=k[0],F=k[1],M=(0,l.useState)(""),z=(0,c.Z)(M,2),A=z[0],I=z[1],H=(0,l.useState)("update"),T=(0,c.Z)(H,2),U=T[0],E=T[1],B=(0,u.v9)(d.Ed),D=(0,u.v9)(p.HH),K=function(e){var t;"add source"===e?t=(0,s.Z)((0,s.Z)({},D),{},{source_complain:(0,s.Z)((0,s.Z)({},D.source_complain),{},{showAddModalSourceComplain:!0})}):"update source"===e?t=(0,s.Z)((0,s.Z)({},D),{},{source_complain:(0,s.Z)((0,s.Z)({},D.source_complain),{},{showUpdateModalSourceComplain:!0})}):"delete source"===e&&(t=(0,s.Z)((0,s.Z)({},D),{},{source_complain:(0,s.Z)((0,s.Z)({},D.source_complain),{},{showDeleteModalSourceComplain:!0})})),m((0,p.cf)(t)),window.scrollTo(0,0)},R=(0,l.useState)({currentPage:1,currentFilterPage:10,pageNumbers:[1],filterPage:[5,10,25,50,100]}),V=(0,c.Z)(R,2),Y=V[0],J=V[1],L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;J((0,s.Z)((0,s.Z)({},Y),{},{currentPage:e,currentFilterPage:Y.currentFilterPage}));var r,a=e*Y.currentFilterPage,n=a-Y.currentFilterPage;r=void 0===t?null===B||void 0===B?void 0:B.data.slice(n,a):t.slice(n,a),w(r)},W=function(e){for(var t=[],r=1;r<=Math.ceil(e.length/Y.currentFilterPage);r++)t.push(r);J((0,s.Z)((0,s.Z)({},Y),{},{pageNumbers:t}))},q=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S().unwrap();case 3:"success"===(t=e.sent).status||"Success"===t.status?(m((0,d.e7)((0,s.Z)({},t))),w(t.data),L(1,t.data),W(t.data)):(w([]),(0,x.Z)(t,!0)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),w([]),(0,x.Z)(e.t0,!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(e){"success"===e.status&&q()};return(0,l.useEffect)((function(){m((0,i.oi)([{path:"/source_complain",title:"Pengaturan Sumber Keluhan"}])),q()}),[]),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{children:(0,g.jsx)(b.zx,{type:"button",onClick:function(){return F(null),E("create"),void K("add source")},children:"Tambah"})}),!_&&(0,g.jsx)("div",{className:"gap-5 mt-5 flex flex-col md:flex md:flex-row",children:(0,g.jsx)(b.ol,{search:A,onHandleSearch:function(e){if(I(e.target.value),e.target.value.length>0){var t=new RegExp(A,"ig"),r=B.data.filter((function(e){return e.sumber.match(t)}));w(r),J({currentPage:1,currentFilterPage:100,pageNumbers:[1],filterPage:[5,10,25,50,100]})}else w(B.data),J({currentPage:1,currentFilterPage:100,pageNumbers:[1],filterPage:[5,10,25,50,100]})},placeholder:"Cari data sumber keluhan..."})}),(0,g.jsxs)(b.u_,{children:[(null===D||void 0===D||null===(e=D.source_complain)||void 0===e?void 0:e.showAddModalSourceComplain)&&(0,g.jsx)(Z,{stateModal:D,getInfo:G,detail:y,titleAction:U}),(null===D||void 0===D||null===(t=D.source_complain)||void 0===t?void 0:t.showUpdateModalSourceComplain)&&(0,g.jsx)(Z,{stateModal:D,getInfo:G,detail:y,titleAction:U}),(null===D||void 0===D||null===(r=D.source_complain)||void 0===r?void 0:r.showDeleteModalSourceComplain)&&(0,g.jsx)(b.pf,{stateModal:D,getInfo:G,detail:y,title:"Sumber Keluhan"})]}),_&&(0,g.jsx)(b.cY,{countRows:8,countColumns:10,totalFilter:1}),!_&&(0,g.jsx)("div",{className:"overflow-x-auto mt-8",children:(0,g.jsxs)("table",{className:"table table-zebra w-full",children:[(0,g.jsx)("thead",{children:(0,g.jsx)("tr",{children:j.map((function(e,t){return(0,g.jsx)("th",{className:"text-center",children:e},t)}))})}),(0,g.jsx)("tbody",{children:v.map((function(e,t){return(0,g.jsxs)("tr",{className:"text-center",children:[(0,g.jsx)("td",{children:t+1}),(0,g.jsx)("td",{children:e.sumber}),(0,g.jsx)("td",{children:(0,g.jsxs)("div",{className:"flex flex-row gap-3 justify-center",children:[(0,g.jsx)(b.W,{onClick:function(){return function(e){F(e),E("update"),K("update source")}(e)}}),(0,g.jsx)(b.Zt,{onClick:function(){return function(e){F(e),K("delete source")}(e)}})]})})]},t)}))})]})}),!_&&(0,g.jsx)(b.tl,{serverMode:!1,currentFilterPage:Y.currentFilterPage,perPage:Y.filterPage,currentPage:Y.currentPage,countPage:Y.pageNumbers,onClick:function(e){return L(e.target.id,void 0)},handlePerPage:function(e){return function(e){var t=Y.currentPage*e,r=t-e,a=null===B||void 0===B?void 0:B.data.slice(r,t);w(a);for(var n=[],c=1;c<=Math.ceil(B.data.length/e);c++)n.push(c);J((0,s.Z)((0,s.Z)({},Y),{},{pageNumbers:n,currentFilterPage:e}))}(e.target.value)}})]})}}}]);
//# sourceMappingURL=701.746c687e.chunk.js.map