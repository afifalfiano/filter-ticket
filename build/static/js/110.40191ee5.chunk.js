"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[110],{26110:function(t,a,n){n.r(a);var e=n(74165),l=n(15861),o=n(1413),s=n(70885),i=n(72791),r=n(24455),d=n(16871),u=n(95048),c=n(64671),f=n(97650),h=n(76899),p=n(41240),v=n(26290),m=n(4979),x=n(37034),g=n(26968),j=n(89504),Z=n(11803),_=n(14450),b=n(80184),k=(0,r.ZP)((function(){return Promise.resolve().then(n.bind(n,57592))})),w=(0,r.ZP)((function(){return n.e(502).then(n.bind(n,19502))})),C=(0,r.ZP)((function(){return n.e(422).then(n.bind(n,54422))})),N=(0,r.ZP)((function(){return n.e(216).then(n.bind(n,21216))})),S=["No","POP","Pelanggan","Kontak","Keluhan","Progress","Waktu","Status","Aksi"];a.default=function(){var t,a,n,r,M,P=(0,i.useState)(S),I=(0,s.Z)(P,2),T=I[0],y=I[1],H=(0,i.useState)("open"),O=(0,s.Z)(H,2),A=O[0],F=O[1],R=(0,i.useState)(null),E=(0,s.Z)(R,2),D=E[0],K=E[1],L=(0,i.useState)(!0),Q=(0,s.Z)(L,2),W=Q[0],z=Q[1],J=(0,d.s0)(),U=(0,i.useState)([]),B=(0,s.Z)(U,2),X=B[0],Y=B[1],q=(0,c.Ru)(),G=(0,s.Z)(q,1)[0],V=(0,u.I0)(),$=(0,u.v9)(g.HF).data,tt=(0,u.v9)(j.HH),at=(0,i.useState)(""),nt=(0,s.Z)(at,2),et=nt[0],lt=nt[1],ot=(0,i.useState)([]),st=(0,s.Z)(ot,2),it=st[0],rt=st[1],dt=(0,i.useState)("all"),ut=(0,s.Z)(dt,2),ct=ut[0],ft=ut[1],ht=(0,u.v9)(f.Mr),pt=function(t){var a;"add complain"===t?a=(0,o.Z)((0,o.Z)({},tt),{},{dashboard:(0,o.Z)((0,o.Z)({},tt.dashboard),{},{showAddModalComplain:!0})}):"update complain"===t?a=(0,o.Z)((0,o.Z)({},tt),{},{dashboard:(0,o.Z)((0,o.Z)({},tt.dashboard),{},{showUpdateModalComplain:!0})}):"modal rfo masal"===t?a=(0,o.Z)((0,o.Z)({},tt),{},{dashboard:(0,o.Z)((0,o.Z)({},tt.dashboard),{},{showRFOTroubleModal:!0})}):"delete complain"===t?a=(0,o.Z)((0,o.Z)({},tt),{},{dashboard:(0,o.Z)((0,o.Z)({},tt.dashboard),{},{showDeleteModalComplain:!0})}):"revert complain"===t&&(a=(0,o.Z)((0,o.Z)({},tt),{},{dashboard:(0,o.Z)((0,o.Z)({},tt.dashboard),{},{showRevertModalComplain:!0})})),V((0,j.cf)(a)),window.scrollTo(0,0)},vt=function(){var t=(0,l.Z)((0,e.Z)().mark((function t(){var a,n,l,s;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return z(!0),t.prev=1,t.next=4,G().unwrap();case 4:"success"===(a=t.sent).status||"Success"===a.status?(2===(null===$||void 0===$?void 0:$.role_id)?(l=a.data.filter((function(t){if(t.pop_id===$.pop_id&&t.status===A)return t})),n=l,V((0,f.JQ)({data:n})),Y(n)):(s=a.data.filter((function(t){if(t.status===A)return t})),V((0,f.JQ)((0,o.Z)({},a))),Y(s)),setTimeout((function(){z(!1)}),1500)):(Y([]),setTimeout((function(){z(!1)}),1500),(0,Z.Z)(a,!1)),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),Y([]),setTimeout((function(){z(!1)}),1500),(0,Z.Z)(t.t0,!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),mt=(0,h.HY)(),xt=(0,s.Z)(mt,1)[0],gt=(0,m.pF)(),jt=(0,s.Z)(gt,1)[0],Zt=function(){var t=(0,l.Z)((0,e.Z)().mark((function t(){var a;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,jt().unwrap();case 3:"success"===(a=t.sent).status||"Success"===a.status?V((0,x.e7)((0,o.Z)({},a))):(0,Z.Z)(a,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,Z.Z)(t.t0,!0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),_t=function(){var t=(0,l.Z)((0,e.Z)().mark((function t(){var a,n,l;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xt().unwrap();case 3:"success"===(a=t.sent).status||"Success"===a.status?(2===(null===$||void 0===$?void 0:$.role_id)?(l=a.data.filter((function(t){if(t.id_pop===$.pop_id)return t})),n=l):n=a.data,V((0,p.pk)({data:n})),rt(n)):(0,Z.Z)(a,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,Z.Z)(t.t0,!0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();(0,i.useEffect)((function(){V((0,v.oi)([{path:"/dashboard",title:"Dasbor"}])),_t(),Zt(),vt(),0===(null===$||void 0===$?void 0:$.role_id)&&y(["No","POP","Pelanggan","Kontak","Keluhan","Progress","Waktu","Status","Sentimen","Aksi"]);var t=setInterval((function(){vt()}),3e4);return function(){clearInterval(t)}}),[]);var bt=function(t){if(t.notifikasi.length>0){var a=0;if(t.notifikasi.forEach((function(t){t.notifikasi_read.forEach((function(t){+$.id_user===+t.user_id&&(t.is_read||a++)}))})),a>0)return(0,b.jsxs)("span",{className:"badge bg-blue-700 border-none text-white",children:["+ ",a]})}},kt=function(t){"success"===t.status&&vt()},wt=function(t){J("/dashboard/detail/".concat(t.id_keluhan))},Ct=function(t){J("/dashboard/rfo_single/".concat(t.id_keluhan,"?id_rfo=").concat(t.rfo_keluhan_id))};return(0,b.jsxs)("div",{children:["open"===A&&(0,b.jsx)(_.zx,{onClick:function(){K(null),pt("add complain")},children:"Tambah"}),(0,b.jsxs)("div",{className:"gap-5 mt-5 flex flex-col md:flex md:flex-row",children:[(0,b.jsx)("div",{className:"form-control w-full md:w-52",children:(0,b.jsx)(_.Nf,{handleStatus:function(t){F(t.target.value);var a=ht.data.filter((function(a){return a.status===t.target.value&&+a.pop.id_pop===+ct||a.status===t.target.value&&"all"===ct?a:void 0}));Y(a)}})}),(0,b.jsx)("div",{className:"form-control w-full md:w-52",children:(0,b.jsx)(_.Co,{dataPOP:it,handlePOP:function(t){ft(t.target.value);var a=ht.data.filter((function(a){if(+a.pop_id===+t.target.value&&a.status===A)return a}));"all"===t.target.value?Y(ht.data.filter((function(t){return t.status===A}))):Y(a)}})}),(0,b.jsx)(_.ol,{search:et,onHandleSearch:function(t){if(t.preventDefault(),lt(t.target.value),t.target.value.length>0){var a=new RegExp(et,"ig"),n=ht.data.filter((function(t){return t.status===A&&+t.pop.id_pop===+ct&&(t.id_pelanggan.match(a)||t.nama_pelanggan.match(a)||t.nama_pelapor.match(a)||t.nomor_pelapor.match(a))||t.status===A&&"all"===ct&&(t.id_pelanggan.match(a)||t.nama_pelanggan.match(a)||t.nama_pelapor.match(a)||t.nomor_pelapor.match(a))?t:void 0}));Y(n)}else Y(ht.data.filter((function(t){return t.status===A&&+t.pop.id_pop===+ct||t.status===A&&"all"===ct?t:void 0})))},placeholder:"Cari data keluhan..."})]}),(0,b.jsx)("div",{className:"overflow-x-auto mt-8",children:(0,b.jsxs)("table",{className:"table table-zebra w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{children:T.map((function(t,a){return(0,b.jsx)("th",{className:"text-center",children:t},a)}))})}),(0,b.jsx)("tbody",{children:X.map((function(t,a){var n;return(0,b.jsxs)("tr",{className:"text-center",children:[(0,b.jsx)("th",{className:"bg-opacity-100",children:a+1}),(0,b.jsx)("td",{className:"text-left",children:(0,b.jsx)(_.Xv,{status:null===t||void 0===t||null===(n=t.pop)||void 0===n?void 0:n.pop})}),(0,b.jsxs)("td",{className:"text-left",children:[null===t||void 0===t?void 0:t.id_pelanggan," - ",null===t||void 0===t?void 0:t.nama_pelanggan]}),(0,b.jsxs)("td",{className:"text-left",children:[null===t||void 0===t?void 0:t.nama_pelapor," - ",null===t||void 0===t?void 0:t.nomor_pelapor]}),(0,b.jsx)("td",{className:"text-left",children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:null===t||void 0===t?void 0:t.keluhan}})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:(null===t||void 0===t?void 0:t.balasan.length)>0?null===t||void 0===t?void 0:t.balasan[t.balasan.length-1].balasan.slice(0,100):"Belum ada tindakan"},className:"".concat(0===(null===t||void 0===t?void 0:t.balasan.length)?"text-center font-semibold badge bg-red-500 border-0 text-white":"")}),(0,b.jsx)("div",{children:$&&bt(t)})]})}),(0,b.jsx)("td",{className:"text-left",children:(0,b.jsx)(_.AW,{item:t})}),(0,b.jsx)("td",{children:(0,b.jsx)(_.OE,{status:null===t||void 0===t?void 0:t.status})}),0===(null===$||void 0===$?void 0:$.role_id)&&(0,b.jsx)("td",{children:(null===t||void 0===t?void 0:t.sentimen_analisis)||"-"}),(0,b.jsx)("td",{children:(0,b.jsx)("div",{className:"flex flex-row gap-3 justify-center",children:"open"===A?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(_.W,{onClick:function(){return function(t){K(t),pt("update complain")}(t)}}),(0,b.jsx)(_.Zt,{onClick:function(){return function(t){K(t),pt("delete complain")}(t)}}),(0,b.jsx)(_.CQ,{onClick:function(){return wt(t)}}),(0,b.jsx)(_.uS,{onClick:function(){return Ct(t)}}),(0,b.jsx)(_.Lr,{onClick:function(){return function(t){K(t),pt("modal rfo masal")}(t)}})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(_.tA,{onClick:function(){return function(t){K(t),pt("revert complain")}(t)}}),(0,b.jsx)(_.CQ,{onClick:function(){return wt(t)}}),null!==t.rfo_keluhan_id&&(0,b.jsx)(_.uS,{onClick:function(){return Ct(t)}}),null!==t.rfo_gangguan_id&&(0,b.jsx)(_.Lr,{onClick:function(){return function(t){K(t),J("/reason_of_outage/detail_masal/".concat(t.rfo_gangguan_id))}(t)}})]})})})]},a)}))})]})}),W&&(0,b.jsx)(_.g5,{}),(0,b.jsxs)(_.u_,{children:[(null===tt||void 0===tt||null===(t=tt.dashboard)||void 0===t?void 0:t.showAddModalComplain)&&(0,b.jsx)(w,{stateModal:tt,detail:D,getInfo:kt}),(null===tt||void 0===tt||null===(a=tt.dashboard)||void 0===a?void 0:a.showRFOTroubleModal)&&(0,b.jsx)(C,{stateModal:tt,detail:D,getInfo:kt}),(null===tt||void 0===tt||null===(n=tt.dashboard)||void 0===n?void 0:n.showDeleteModalComplain)&&(0,b.jsx)(k,{stateModal:tt,detail:D,getInfo:kt,title:"keluhan"}),(null===tt||void 0===tt||null===(r=tt.dashboard)||void 0===r?void 0:r.showUpdateModalComplain)&&(0,b.jsx)(w,{stateModal:tt,detail:D,getInfo:kt}),(null===tt||void 0===tt||null===(M=tt.dashboard)||void 0===M?void 0:M.showRevertModalComplain)&&(0,b.jsx)(N,{stateModal:tt,detail:D,getInfo:kt})]})]})}}}]);
//# sourceMappingURL=110.40191ee5.chunk.js.map