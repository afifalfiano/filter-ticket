"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[438],{4438:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(74165),r=a(15861),s=a(1413),o=a(70885),i=a(95048),l=a(72791),c=a(26290),u=a(41240),d=a(76899),p=a(55705),f=a(26968),h=a(86017),x=a(89504),v=a(11803),m=a(19585),g=a(14450),Z=a(80184);var P=function(e){var t=e.stateModal,a=e.getInfo,l=e.detail,c=e.titleAction,u=(0,d.cX)(),P=(0,o.Z)(u,1)[0],j=(0,d.IX)(),b=(0,o.Z)(j,1)[0],w=(0,i.v9)(f.HF).data,N={pop:(null===l||void 0===l?void 0:l.pop)||""},k=(0,i.I0)(),y=function(){var e=(0,s.Z)((0,s.Z)({},t),{},{pop:(0,s.Z)((0,s.Z)({},t.pop),{},{showAddModalPop:!1,showUpdateModalPop:!1})});k((0,x.cf)(e))},M=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,a){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={id_pop:Math.floor(90*Math.random()+10),pop:t.pop,user_id:w.id_user};try{null===l?C(r,a):F(r)}catch(n){(0,v.Z)(n,!0)}case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({id:l.id_pop,body:(0,s.Z)((0,s.Z)({},t),{},{id_pop:l.id_pop})});case 2:"success"===(r=e.sent).data.status||"Success"===r.data.status?((0,m.Z)(r),setTimeout((function(){a({status:"success"}),y()}),2e3)):(0,v.Z)(r,!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,r){var o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P((0,s.Z)({},t));case 2:"success"===(o=e.sent).data.status||"Success"===o.data.status?((0,m.Z)(o),setTimeout((function(){r(),y(),a({status:"success"})}),2e3)):(0,v.Z)(o,!0);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(e){e(),y()};return(0,Z.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,Z.jsxs)("div",{className:"modal-box mt-5  h-fit max-h-fit  max-w-lg",children:[(0,Z.jsx)(g.b_,{onClick:y}),(0,Z.jsxs)("h3",{className:"text-lg font-bold",children:[null===l&&"create"===c?"Tambah POP":"update"===c&&"Ubah POP","read"===c&&"Detail POP"]}),(0,Z.jsx)("hr",{className:"my-2"}),(0,Z.jsx)(p.J9,{enableReinitialize:!0,initialValues:N,validationSchema:h.sX,onSubmit:function(e,t){var a=t.resetForm;M(e,a)},children:function(e){var t=e.values,a=e.errors,n=e.touched,r=e.isValid,s=e.handleBlur,o=e.handleChange,i=e.resetForm;return(0,Z.jsxs)(p.l0,{children:[(0,Z.jsxs)("div",{className:"form-control",children:[(0,Z.jsx)("label",{htmlFor:"pop",className:"label",children:(0,Z.jsx)("span",{className:"label-text",children:" Nama POP:"})}),(0,Z.jsx)(p.gN,{id:"pop",name:"pop",placeholder:"Nama POP",value:t.pop,disabled:"read"===c,onBlur:s,onChange:o,className:"input input-md input-bordered  max-w-full"}),a.pop&&n.pop&&(0,Z.jsx)(g.aH,{errors:a.pop})]}),(0,Z.jsx)("hr",{className:"my-2 mt-10"}),"read"!==c&&(0,Z.jsxs)("div",{className:"modal-action justify-center",children:[(0,Z.jsx)(g.zx,{type:"button",onClick:function(){return S(i)},children:"Batal"}),(0,Z.jsx)(g.zx,{type:"submit",className:"btn-success",disabled:!r,children:"Simpan"})]}),"read"===c&&(0,Z.jsx)("div",{className:"modal-action justify-center",children:(0,Z.jsx)(g.zx,{type:"button",onClick:function(){return S(i)},children:"Kembali"})})]})}})]})})},j=["No","Nama","Aksi"];var b=function(){var e,t,a,p=(0,i.I0)(),f=(0,l.useState)([]),h=(0,o.Z)(f,2),m=h[0],b=h[1],w=(0,d.HY)(),N=(0,o.Z)(w,2),k=N[0],y=N[1].isLoading,M=(0,l.useState)(null),F=(0,o.Z)(M,2),C=F[0],S=F[1],_=(0,l.useState)(""),O=(0,o.Z)(_,2),z=O[0],A=O[1],I=(0,l.useState)("update"),H=(0,o.Z)(I,2),T=H[0],U=H[1],B=(0,i.v9)(u.Yq),D=(0,i.v9)(x.HH),R=function(e){var t;"add pop"===e?t=(0,s.Z)((0,s.Z)({},D),{},{pop:(0,s.Z)((0,s.Z)({},D.pop),{},{showAddModalPop:!0})}):"update pop"===e?t=(0,s.Z)((0,s.Z)({},D),{},{pop:(0,s.Z)((0,s.Z)({},D.pop),{},{showUpdateModalPop:!0})}):"delete pop"===e&&(t=(0,s.Z)((0,s.Z)({},D),{},{pop:(0,s.Z)((0,s.Z)({},D.pop),{},{showDeleteModalPop:!0})})),p((0,x.cf)(t)),window.scrollTo(0,0)},X=(0,l.useState)({currentPage:1,currentFilterPage:10,pageNumbers:[1],filterPage:[5,10,25,50,100]}),Y=(0,o.Z)(X,2),E=Y[0],V=Y[1],q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;V((0,s.Z)((0,s.Z)({},E),{},{currentPage:e,currentFilterPage:E.currentFilterPage}));var a,n=e*E.currentFilterPage,r=n-E.currentFilterPage;a=void 0===t?null===B||void 0===B?void 0:B.data.slice(r,n):t.slice(r,n),b(a)},J=function(e){for(var t=[],a=1;a<=Math.ceil(e.length/E.currentFilterPage);a++)t.push(a);V((0,s.Z)((0,s.Z)({},E),{},{pageNumbers:t}))},K=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k().unwrap();case 3:"success"===(t=e.sent).status||"Success"===t.status?(p((0,u.pk)((0,s.Z)({},t))),b(t.data),q(1,t.data),J(t.data)):(b([]),(0,v.Z)(t,!0)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),b([]),(0,v.Z)(e.t0,!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),L=function(e){"success"===e.status&&K()};return(0,l.useEffect)((function(){p((0,c.oi)([{path:"/pop",title:"Pengaturan POP"}])),K()}),[]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(g.zx,{type:"button",onClick:function(){return S(null),U("create"),void R("add pop")},children:"Tambah"})}),!y&&(0,Z.jsx)("div",{className:"gap-5 mt-5 flex flex-col md:flex md:flex-row",children:(0,Z.jsx)(g.ol,{search:z,onHandleSearch:function(e){if(A(e.target.value),e.target.value.length>0){var t=new RegExp(z,"ig"),a=B.data.filter((function(e){return e.pop.match(t)}));b(a),V({currentPage:1,currentFilterPage:100,pageNumbers:[1],filterPage:[5,10,25,50,100]})}else b(B.data),V({currentPage:1,currentFilterPage:100,pageNumbers:[1],filterPage:[5,10,25,50,100]})},placeholder:"Cari data POP..."})}),(0,Z.jsxs)(g.u_,{children:[(null===D||void 0===D||null===(e=D.pop)||void 0===e?void 0:e.showAddModalPop)&&(0,Z.jsx)(P,{stateModal:D,getInfo:L,detail:C,titleAction:T}),(null===D||void 0===D||null===(t=D.pop)||void 0===t?void 0:t.showUpdateModalPop)&&(0,Z.jsx)(P,{stateModal:D,getInfo:L,detail:C,titleAction:T}),(null===D||void 0===D||null===(a=D.pop)||void 0===a?void 0:a.showDeleteModalPop)&&(0,Z.jsx)(g.pf,{stateModal:D,getInfo:L,detail:C,title:"POP"})]}),y&&(0,Z.jsx)(g.cY,{countRows:8,countColumns:10,totalFilter:1}),!y&&(0,Z.jsx)("div",{className:"overflow-x-auto mt-8",children:(0,Z.jsxs)("table",{className:"table table-zebra w-full",children:[(0,Z.jsx)("thead",{children:(0,Z.jsx)("tr",{children:j.map((function(e,t){return(0,Z.jsx)("th",{className:"text-center",children:e},t)}))})}),(0,Z.jsx)("tbody",{children:m.map((function(e,t){return(0,Z.jsxs)("tr",{className:"text-center",children:[(0,Z.jsx)("td",{children:t+1}),(0,Z.jsx)("td",{children:e.pop}),(0,Z.jsx)("td",{children:(0,Z.jsxs)("div",{className:"flex flex-row gap-3 justify-center",children:[(0,Z.jsx)(g.W,{onClick:function(){return function(e){S(e),U("update"),R("update pop")}(e)}}),(0,Z.jsx)(g.Zt,{onClick:function(){return function(e){S(e),R("delete pop")}(e)}})]})})]},t)}))})]})}),!y&&(0,Z.jsx)(g.tl,{serverMode:!1,currentFilterPage:E.currentFilterPage,perPage:E.filterPage,currentPage:E.currentPage,countPage:E.pageNumbers,onClick:function(e){return q(e.target.id,void 0)},handlePerPage:function(e){return function(e){var t=E.currentPage*e,a=t-e,n=null===B||void 0===B?void 0:B.data.slice(a,t);b(n);for(var r=[],o=1;o<=Math.ceil(B.data.length/e);o++)r.push(o);V((0,s.Z)((0,s.Z)({},E),{},{pageNumbers:r,currentFilterPage:e}))}(e.target.value)}})]})}}}]);
//# sourceMappingURL=438.892f649d.chunk.js.map