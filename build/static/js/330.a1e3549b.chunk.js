"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[330],{6330:function(e,a,s){s.r(a),s.d(a,{default:function(){return O}});var n=s(1413),l=s(74165),t=s(15861),r=s(70885),i=s(72791),o=s(95048),c=s(42982),d=s(55705),u=s(49128),m=s(26968),p=s(41240),x=s(15738),f=s(26290),h=s(86017),v=s(87337),j=s(89504),w=s(11803),b=s(19585),N=s(14450),g=s(80184);var Z=function(e){var a=e.stateModal,s=e.getInfo,c=(0,i.useState)(null),d=(0,r.Z)(c,2),u=d[0],p=d[1],x=(0,i.useState)(null),f=(0,r.Z)(x,2),h=f[0],Z=f[1],y=(0,v.Rq)(),_=(0,r.Z)(y,1)[0],k=(0,o.I0)(),C=function(){var e=(0,n.Z)((0,n.Z)({},a),{},{profile:(0,n.Z)((0,n.Z)({},a.profile),{},{showPreviewImageModal:!1})});k((0,j.cf)(e))},S=function(){var e=(0,t.Z)((0,l.Z)().mark((function e(){var a,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("avatar",h),e.prev=2,e.next=5,_(a).unwrap();case 5:"success"===(n=e.sent).status||"Success"===n.status?((0,b.Z)(n),k((0,m.l7)("updated")),setTimeout((function(){s({status:"success"}),C(),k((0,m.l7)(null))}),2e3)):(0,w.Z)(n,!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),(0,w.Z)(e.t0,!0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,g.jsxs)("div",{className:"modal-box mt-3  h-fit max-h-fit  max-w-lg",children:[(0,g.jsx)(N.b_,{onClick:C}),(0,g.jsx)("h3",{className:"text-lg font-bold",children:"Preview Profile Baru"}),(0,g.jsx)("hr",{className:"my-2"}),(0,g.jsxs)("div",{className:"flex justify-center align-middle items-center  flex-col text-cennter",children:[(0,g.jsx)(N.Zy,{onChange:function(e){return function(e){p(URL.createObjectURL(e.target.files[0])),Z(e.target.files[0])}(e)}}),(0,g.jsxs)("div",{className:"border rounded-md mt-5 p-5",children:[u&&(0,g.jsx)("img",{fetchpriority:"high",width:"100%",height:"100%",src:u,alt:"avatar",className:"image-full max-w-md"}),!u&&(0,g.jsx)("p",{children:"Belum ada gambar"})]})]}),(0,g.jsx)("hr",{className:"my-2 mt-10"}),(0,g.jsxs)("div",{className:"modal-action justify-center",children:[(0,g.jsx)(N.zx,{type:"button",onClick:function(){return Z(null),p(null),void C()},children:"Batal"}),(0,g.jsx)(N.zx,{type:"button",className:"btn-success",onClick:function(){return S()},children:"Simpan"})]})]})})},y=s(28910),_=s(97650),k=s(33171),C=s(84851),S=s(61198),P=s(74102),z=s(88201),F=s(37034),B=s(92044),I=s(16871);var M=function(e){e.stateModal,e.getInfo,e.detail,e.title;var a=e.payload,s=(0,v.$h)(),n=(0,r.Z)(s,1)[0],i=(0,o.I0)(),c=function(){i((0,j.cf)(j.Hi))},d=(0,I.s0)(),f=(0,v._y)(),h=(0,r.Z)(f,1)[0],Z=function(){var e=(0,t.Z)((0,l.Z)().mark((function e(a){var s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h().unwrap();case 3:"success"===(null===(s=e.sent)||void 0===s?void 0:s.status)||"Success"===(null===s||void 0===s?void 0:s.status)?(i((function(e){e((0,m.H0)()),e((0,y.UE)()),e((0,_.i6)()),e((0,k.LJ)()),e((0,j.Cc)()),e((0,C.hS)()),e((0,p.PE)()),e((0,S.rm)()),e((0,P.oh)()),e((0,z.XZ)()),e((0,F.rq)()),e((0,x.NY)()),e((0,B.B4)())})),localStorage.clear(),d("/sign_in",{replace:!0})):(0,w.Z)(s,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,w.Z)(e.t0,!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),M=function(){var e=(0,t.Z)((0,l.Z)().mark((function e(a){var s,t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=a.password.trim().length>0&&a.password_confirmation.trim().length>0?{name:a.name,pop_id:a.pop_id,role_id:null===a||void 0===a?void 0:a.role_id,email:a.email,password:a.password,password_confirmation:a.password_confirmation}:{name:a.name,pop_id:a.pop_id,role_id:null===a||void 0===a?void 0:a.role_id,email:a.email},e.next=4,n(s).unwrap();case 4:"success"===(t=e.sent).status||"Success"===t.status?((0,b.Z)(t),setTimeout((function(){Z()}),1e3)):(0,w.Z)(t,!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,w.Z)(e.t0,!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 pt-10 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,g.jsxs)("div",{className:"modal-box h-fit max-h-fit modal-box-custom",children:[(0,g.jsx)(N.b_,{onClick:c}),(0,g.jsx)("h3",{className:"text-lg font-bold",children:"Ganti Password"}),(0,g.jsx)("hr",{className:"my-2"}),(0,g.jsxs)("div",{className:"flex flex-col justify-center align-middle items-center",children:[(0,g.jsx)(u.Von,{size:50,color:"#FF2E00"}),(0,g.jsx)("p",{className:"py-4",children:"Apakah anda yakin akan mengganti password akun? Jika ya, maka secara otomatis akun anda akan logout."})]}),(0,g.jsx)("hr",{className:"my-2 mt-5"}),(0,g.jsxs)("div",{className:"modal-action justify-center",children:[(0,g.jsx)(N.zx,{type:"button",onClick:function(){return c()},children:"Batal"}),(0,g.jsx)(N.zx,{type:"button",className:"btn-success",onClick:function(){return M(a)},children:"Simpan"})]})]})})};var H=function(e){var a,s,l=e.handleForm,t=e.profile,v=(0,o.v9)(m.HF).data,w=(0,i.useState)(null),b=(0,r.Z)(w,2),y=b[0],_=b[1],k=(0,o.v9)(x.n5),C=(0,o.v9)(p.Yq),S=(0,o.I0)(),P=(0,o.v9)(f.Ms);(0,i.useEffect)((function(){var e=[].concat((0,c.Z)(P.data),[{path:"/profile",title:"Ubah Profil"}]);S((0,f.oi)(e))}),[]);var z=function(e){"success"===e.status&&l(!1)},F=(0,o.v9)(j.HH),B=function(e,a){var s;"preview"===e?s=(0,n.Z)((0,n.Z)({},F),{},{profile:(0,n.Z)((0,n.Z)({},F.profile),{},{showPreviewImageModal:!0})}):"change-password"===e&&(s=(0,n.Z)((0,n.Z)({},F),{},{change_password:(0,n.Z)((0,n.Z)({},F.change_password),{},{showChangePasswordModal:!0})}),_(a)),S((0,j.cf)(s)),window.scrollTo(0,0)};return(0,g.jsxs)("div",{children:[(0,g.jsxs)(N.u_,{children:[(null===F||void 0===F||null===(a=F.profile)||void 0===a?void 0:a.showPreviewImageModal)&&(0,g.jsx)(Z,{stateModal:F,getInfo:z}),(null===F||void 0===F||null===(s=F.change_password)||void 0===s?void 0:s.showChangePasswordModal)&&(0,g.jsx)(M,{stateModal:F,getInfo:z,payload:y})]}),(0,g.jsx)(d.J9,{enableReinitialize:!0,validationSchema:h.$2,initialValues:{name:null===t||void 0===t?void 0:t.name,email:null===t||void 0===t?void 0:t.email,pop_id:null===v||void 0===v?void 0:v.pop_id,role_id:null===v||void 0===v?void 0:v.role_id,old_password:"",password:"",password_confirmation:""},onSubmit:function(e){B("change-password",e)},children:function(e){var a,s,n=e.values,r=e.errors,i=e.touched,o=(e.isValid,e.handleBlur),c=e.handleChange;return(0,g.jsx)(d.l0,{children:(0,g.jsx)("div",{className:"flex items-start justify-center",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"avatar",children:(0,g.jsx)("div",{className:"bg-neutral-focus text-neutral-content rounded-full w-24",children:(0,g.jsx)("span",{className:"text-3xl",children:(0,g.jsx)("img",{fetchpriority:"high",width:"100%",height:"100%",src:null===t||void 0===t?void 0:t.avatar,alt:null===t||void 0===t?void 0:t.name})})})}),(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsx)(u.LsQ,{size:24,className:"link link-primary",onClick:function(){B("preview")}})}),(0,g.jsx)("h1",{className:"font-semibold text-xl mt-5",children:"Ubah Informasi"}),(0,g.jsxs)("div",{className:"my-5 flex flex-col lg:flex-row justify-center gap-7",children:[(0,g.jsx)("div",{className:"border-gray-200 rounded-md border-2 w-80 h-auto items-center flex-1 flex-row justify-center",children:(0,g.jsxs)("div",{className:"px-5 py-5",children:[(0,g.jsxs)("div",{className:"form-control",children:[(0,g.jsx)("label",{htmlFor:"fullName",className:"label",children:(0,g.jsx)("span",{className:"label-text",children:" Nama Lengkap:"})}),(0,g.jsx)(d.gN,{id:"name",name:"name",placeholder:"",disabled:3!==(null===v||void 0===v?void 0:v.role_id),value:n.name,onBlur:o,onChange:c,className:"input input-md input-bordered  max-w-full"})]}),(0,g.jsxs)("div",{className:"form-control",children:[(0,g.jsx)("label",{htmlFor:"email",className:"label",children:(0,g.jsx)("span",{className:"label-text",children:" Email:"})}),(0,g.jsx)(d.gN,{type:"email",component:"input",id:"email",name:"email",onBlur:o,onChange:c,placeholder:"email@citra.net",value:n.email,disabled:3!==(null===v||void 0===v?void 0:v.role_id),className:"input input-md input-bordered  max-w-full"})]}),(0,g.jsxs)("div",{className:"form-control",children:[(0,g.jsx)("label",{htmlFor:"team",className:"label",children:(0,g.jsx)("span",{className:"label-text",children:" Tim:"})}),(0,g.jsx)(d.gN,{component:"select",id:"role_id",name:"role_id",value:null===n||void 0===n?void 0:n.role_id,onBlur:o,disabled:3!==(null===v||void 0===v?void 0:v.role_id),onChange:c,className:"select w-full max-w-full input-bordered",children:null===k||void 0===k||null===(a=k.data)||void 0===a?void 0:a.map((function(e,a){return(0,g.jsx)("option",{id:e.id_role,value:e.id_role,label:e.role,children:e.role},a)}))})]}),(0,g.jsxs)("div",{className:"form-control",children:[(0,g.jsx)("label",{htmlFor:"location",className:"label",children:(0,g.jsx)("span",{className:"label-text",children:" POP (Area Operasional):"})}),(0,g.jsx)(d.gN,{component:"select",id:"pop_id",name:"pop_id",value:n.pop_id,disabled:3!==(null===v||void 0===v?void 0:v.role_id),onBlur:o,onChange:c,className:"select w-full max-w-full input-bordered",children:null===C||void 0===C||null===(s=C.data)||void 0===s?void 0:s.map((function(e,a){return(0,g.jsx)("option",{value:e.id_pop,label:e.pop,children:e.pop},a)}))})]})]})}),(0,g.jsx)("div",{className:"border-gray-200 rounded-md border-2 w-80 h-auto items-center flex-1 flex-row justify-center",children:(0,g.jsxs)("div",{className:"px-5 py-5",children:[(0,g.jsxs)("div",{className:"form-control ",children:[(0,g.jsx)("label",{htmlFor:"password",className:"label",children:(0,g.jsx)("span",{className:"label-text",children:" Password:"})}),(0,g.jsx)(d.gN,{type:"password",component:"input",id:"password",name:"password",placeholder:"***************",onBlur:o,onChange:c,value:n.password,className:"input input-md input-bordered  max-w-full"}),r.password&&i.password&&(0,g.jsx)(N.aH,{errors:r.password})]}),(0,g.jsxs)("div",{className:"form-control ",children:[(0,g.jsx)("label",{htmlFor:"password_confirmation",className:"label",children:(0,g.jsx)("span",{className:"label-text",children:"Konfirmsi Password:"})}),(0,g.jsx)(d.gN,{type:"password",id:"password_confirmation",name:"password_confirmation",placeholder:"***************",onBlur:o,onChange:c,value:n.password_confirmation,className:"input input-md input-bordered  max-w-full"}),r.password_confirmation&&i.password_confirmation&&(0,g.jsx)(N.aH,{errors:r.password_confirmation})]})]})})]}),(0,g.jsxs)("div",{className:"flex flex-nowrap gap-5 justify-center",children:[(0,g.jsx)(N.zx,{type:"button",onClick:function(){l(!1)},children:"Kembali"}),(0,g.jsx)(N.zx,{type:"submit",className:"btn-success",children:"Simpan"})]})]})})})}})]})},E=s(76899),U=s(2512);var L=function(e){var a,s,n,l,t,r,i,o,c=Object.assign({},e);return(0,g.jsx)("div",{className:"flex items-start justify-center",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"avatar",children:(0,g.jsx)("div",{className:"bg-neutral-focus text-neutral-content rounded-full w-24",children:(0,g.jsx)("span",{className:"text-3xl",children:(0,g.jsx)("img",{fetchpriority:"high",width:"100%",height:"100%",src:null===(a=c.profile)||void 0===a?void 0:a.avatar,alt:null===(s=c.profile)||void 0===s?void 0:s.name})})})}),(0,g.jsx)("h1",{className:"font-semibold text-xl mt-5",children:null===(n=c.profile)||void 0===n?void 0:n.name}),(0,g.jsx)("div",{className:"my-5 flex justify-center",children:(0,g.jsxs)("div",{className:"border-gray-200 rounded-md border-2 w-80 h-48 items-center flex-row justify-center",children:[(0,g.jsx)("div",{className:"flex pt-1 px-1 justify-end",children:(0,g.jsx)(u.z2D,{size:30,className:"link",onClick:c.handleUpdateProfile})}),(0,g.jsx)("div",{className:"px-5 py-5",children:(0,g.jsx)("table",{className:"border-none items-center w-full font-semibold",children:(0,g.jsxs)("tbody",{children:[(0,g.jsxs)("tr",{className:"text-left",children:[(0,g.jsx)("td",{children:"Email"}),(0,g.jsx)("td",{children:":"}),(0,g.jsx)("td",{children:null===(l=c.profile)||void 0===l?void 0:l.email})]}),(0,g.jsxs)("tr",{className:"text-left",children:[(0,g.jsx)("td",{children:"Role"}),(0,g.jsx)("td",{children:":"}),(0,g.jsx)("td",{children:null===(t=c.profile)||void 0===t||null===(r=t.role)||void 0===r?void 0:r.role})]}),(0,g.jsxs)("tr",{className:"text-left",children:[(0,g.jsx)("td",{children:"POP"}),(0,g.jsx)("td",{children:":"}),(0,g.jsx)("td",{children:null===(i=c.profile)||void 0===i||null===(o=i.pop)||void 0===o?void 0:o.pop})]})]})})})]})})]})})};var O=function(){var e=(0,o.I0)(),a=(0,i.useState)(!1),s=(0,r.Z)(a,2),c=s[0],d=s[1],u=(0,i.useState)(null),h=(0,r.Z)(u,2),j=h[0],b=h[1],N=(0,i.useState)(null),Z=(0,r.Z)(N,2)[1],y=(0,i.useState)(null),_=(0,r.Z)(y,2)[1],k=(0,o.v9)(m.HF).data,C=(0,o.v9)(x.n5),S=(0,o.v9)(p.Yq),P=(0,E.HY)(),z=(0,r.Z)(P,1)[0],F=(0,U.LN)(),B=(0,r.Z)(F,1)[0],I=(0,v.Tm)(),M=(0,r.Z)(I,1)[0],O=function(){var e=(0,t.Z)((0,l.Z)().mark((function e(){var a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M().unwrap();case 3:"success"===(a=e.sent).status||"Success"===a.status?b(a.data):(0,w.Z)(a,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,w.Z)(e.t0,!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var a=(0,t.Z)((0,l.Z)().mark((function a(){var s,t,r;return(0,l.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,z().unwrap();case 3:"success"===(s=a.sent).status||"Success"===s.status?(e((0,p.pk)((0,n.Z)({},s))),r=null===S||void 0===S||null===(t=S.data)||void 0===t?void 0:t.find((function(e){return e.id_pop===k.pop_id})),_(r)):(0,w.Z)(s,!0),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),(0,w.Z)(a.t0,!0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}(),T=function(){var a=(0,t.Z)((0,l.Z)().mark((function a(){var s,t,r;return(0,l.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B().unwrap();case 3:"success"===(s=a.sent).status||"Success"===s.status?(e((0,x.g4)((0,n.Z)({},s))),r=null===C||void 0===C||null===(t=C.data)||void 0===t?void 0:t.find((function(e){return+e.id_role===+(null===k||void 0===k?void 0:k.role_id)})),Z(r)):(0,w.Z)(s,!0),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),(0,w.Z)(a.t0,!0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}();return(0,i.useEffect)((function(){e((0,f.oi)([{path:"/profile",title:"Profil"}])),R(),T(),O()}),[c]),(0,g.jsx)("div",{children:c?(0,g.jsx)(H,{handleForm:function(e){d(e)},profile:j}):(0,g.jsx)(L,{profile:j,handleUpdateProfile:function(){d(!0)}})})}}}]);
//# sourceMappingURL=330.a1e3549b.chunk.js.map