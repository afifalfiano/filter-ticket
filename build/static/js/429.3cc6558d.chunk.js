"use strict";(self.webpackChunkfilter_ticket=self.webpackChunkfilter_ticket||[]).push([[429,152],{75429:function(t,e,a){a.r(e);var n=a(74165),r=a(15861),l=a(1413),s=a(70885),i=a(72791),o=a(95048),c=a(16871),d=a(26290),u=a(61198),h=a(76899),p=a(41240),x=a(26968),f=a(38152),v=a(89504),j=a(52886),m=a(11803),g=a(14450),Z=a(80184),w=["No","Nomor Laporan","POP","Tanggal","Shift","Petugas NOC","Petugas Helpdesk","Aksi"];e.default=function(){var t,e,a=(0,i.useState)("all"),k=(0,s.Z)(a,2),b=k[0],N=k[1],_=(0,i.useState)([]),P=(0,s.Z)(_,2),C=P[0],D=P[1],S=(0,i.useState)([]),y=(0,s.Z)(S,2),M=y[0],H=y[1],L=(0,i.useState)(null),R=(0,s.Z)(L,2),O=R[0],z=R[1],T=(0,c.s0)(),E=(0,j.zw)(),I=(0,s.Z)(E,2),F=I[0],K=I[1].isLoading,Y=(0,o.v9)(u.qd),q=(0,h.HY)(),A=(0,s.Z)(q,1)[0],Q=(0,i.useState)(""),U=(0,s.Z)(Q,2),X=U[0],B=U[1],G=(0,o.I0)(),J=(0,o.v9)(x.HF).data,V=(0,o.v9)(v.HH),W=function(t){var e;"detail report"===t?e=(0,l.Z)((0,l.Z)({},V),{},{report:(0,l.Z)((0,l.Z)({},V.report),{},{showDetailModalReport:!0})}):"delete report"===t&&(e=(0,l.Z)((0,l.Z)({},V),{},{report:(0,l.Z)((0,l.Z)({},V.report),{},{showDeleteModalReport:!0})})),G((0,v.cf)(e)),window.scrollTo(0,0)},$=(0,i.useState)(1),tt=(0,s.Z)($,2),et=tt[0],at=tt[1],nt=(0,i.useState)([5]),rt=(0,s.Z)(nt,2),lt=rt[0],st=rt[1],it=(0,i.useState)([1]),ot=(0,s.Z)(it,2),ct=ot[0],dt=ot[1],ut=function(){var t=(0,r.Z)((0,n.Z)().mark((function t(){var e,a,r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A().unwrap();case 3:"success"===(e=t.sent).status||"Success"===e.status?(2===(null===J||void 0===J?void 0:J.role_id)?(r=e.data.filter((function(t){if(t.id_pop===J.pop_id)return t})),a=r):a=e.data,G((0,p.pk)({data:a})),D(a)):(0,m.Z)(e,!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,m.Z)(t.t0,!0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),ht=function(){var t=(0,r.Z)((0,n.Z)().mark((function t(){var e,a,r,l,s,i,o=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,a="?page=".concat(e),t.prev=2,t.next=5,F(a).unwrap();case 5:if("success"===(r=t.sent).status||"Success"===r.status){for(l=r.data.data,G((0,u.Uk)({data:l})),H(l),at(r.data.current_page),st([r.data.per_page]),s=[],i=0;i<r.data.last_page;i++)s.push(i+1);dt(s)}else H([]),(0,m.Z)(r,!0);t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),H([]),(0,m.Z)(t.t0,!0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){G((0,d.oi)([{path:"/report",title:"Laporan"}])),ut(),ht()}),[]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(g.zx,{type:"button",onClick:function(){T("/report/create")},children:"Tambah"})}),(0,Z.jsxs)(g.u_,{children:[(null===V||void 0===V||null===(t=V.report)||void 0===t?void 0:t.showDeleteModalReport)&&(0,Z.jsx)(g.pf,{stateModal:V,getInfo:function(t){"success"===t.status&&ht()},detail:O,title:"laporan"}),(null===V||void 0===V||null===(e=V.report)||void 0===e?void 0:e.showDetailModalReport)&&(0,Z.jsx)(f.default,{stateModal:V,detailData:O})]}),!K&&(0,Z.jsxs)("div",{className:"gap-5 mt-5 flex flex-col md:flex md:flex-row",children:[(0,Z.jsx)("div",{className:"form-control w-full md:w-52",children:(0,Z.jsx)(g.Co,{dataPOP:C,handlePOP:function(t){N(t.target.value);var e=Y.data.filter((function(e){if(+e.pop_id===+t.target.value)return e}));"all"===t.target.value?H(Y.data):H(e)}})}),(0,Z.jsx)(g.ol,{search:X,onHandleSearch:function(t){if(t.preventDefault(),B(t.target.value),t.target.value.length>0){var e=new RegExp(X,"ig"),a=Y.data.filter((function(t){return+t.pop.id_pop===+b&&(t.nomor_laporan.match(e)||t.noc.match(e)||t.helpdesk.match(e)||t.pop.pop.match(e))||"all"===b&&(t.nomor_laporan.match(e)||t.noc.match(e)||t.helpdesk.match(e)||t.pop.pop.match(e))?t:void 0}));H(a)}else H(Y.data.filter((function(t){return+t.pop.id_pop===+b||"all"===b?t:void 0})))},placeholder:"Cari data laporan..."})]}),K&&(0,Z.jsx)(g.cY,{countRows:8,countColumns:10,totalFilter:2}),!K&&(0,Z.jsx)("div",{className:"overflow-x-auto mt-8",children:(0,Z.jsxs)("table",{className:"table table-zebra w-full",children:[(0,Z.jsx)("thead",{children:(0,Z.jsx)("tr",{children:w.map((function(t,e){return(0,Z.jsx)("th",{className:"text-center",children:t},e)}))})}),(0,Z.jsx)("tbody",{children:M.map((function(t,e){var a;return(0,Z.jsxs)("tr",{className:"text-center",children:[(0,Z.jsx)("th",{children:e+1}),(0,Z.jsx)("th",{children:null===t||void 0===t?void 0:t.nomor_laporan}),(0,Z.jsx)("td",{children:(0,Z.jsx)(g.Xv,{status:null===t||void 0===t||null===(a=t.pop)||void 0===a?void 0:a.pop})}),(0,Z.jsx)("td",{className:"text-left",children:new Date(t.tanggal).toLocaleDateString("id-ID")}),(0,Z.jsxs)("td",{children:[t.shift.shift," (",t.shift.mulai," - ",t.shift.selesai,")"]}),(0,Z.jsx)("td",{children:t.noc}),(0,Z.jsx)("td",{children:t.helpdesk}),(0,Z.jsx)("td",{children:(0,Z.jsxs)("div",{className:"flex flex-row gap-3 justify-center",children:[(0,Z.jsx)(g.CQ,{onClick:function(){return function(t){z(t),W("detail report")}(t)}}),(0,Z.jsx)(g.Tn,{onClick:function(e){return function(t,e){t.preventDefault(),t.stopPropagation(),window.open("".concat(e.lampiran_laporan),"_blank")}(e,t)}}),(0,Z.jsx)(g.Zt,{onClick:function(){return function(t){z(t),W("delete report")}(t)}})]})})]},e)}))})]})}),!K&&(0,Z.jsx)(g.tl,{perPage:lt,currentPage:et,countPage:ct,onClick:function(t){return ht(t.target.id)},serverMode:!0})]})}},38152:function(t,e,a){a.r(e);var n=a(1413),r=a(95048),l=a(14450),s=a(89504),i=a(80184);e.default=function(t){var e=t.stateModal,a=t.detailData,o=(0,r.I0)(),c=function(){var t=(0,n.Z)((0,n.Z)({},e),{},{report:(0,n.Z)((0,n.Z)({},e.report),{},{showDetailModalReport:!1})});o((0,s.cf)(t))};return(0,i.jsx)("div",{className:"fixed w-screen h-screen bg-opacity-80 bg-gray-700 top-0 left-0 bottom-0 right-0 z-50 flex justify-center",children:(0,i.jsxs)("div",{className:"modal-box h-fit max-h-fit max-w-xl",children:[(0,i.jsx)(l.b_,{onClick:c}),(0,i.jsx)("h3",{className:"text-lg font-bold",children:"Detail Laporan"}),(0,i.jsx)("hr",{className:"my-2"}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"table w-full border-0",children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Tanggal"}),(0,i.jsx)("td",{children:":"}),(0,i.jsx)("td",{children:(null===a||void 0===a?void 0:a.tanggal)||"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Shift"}),(0,i.jsx)("td",{children:":"}),(0,i.jsx)("td",{children:"".concat(null===a||void 0===a?void 0:a.shift.shift," (").concat(null===a||void 0===a?void 0:a.shift.mulai,") - (").concat(null===a||void 0===a?void 0:a.shift.selesai,")")||0})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Petugas NOC"}),(0,i.jsx)("td",{children:":"}),(0,i.jsx)("td",{children:(null===a||void 0===a?void 0:a.noc)||"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Petugas HELPDESK"}),(0,i.jsx)("td",{children:":"}),(0,i.jsx)("td",{children:(null===a||void 0===a?void 0:a.helpdesk)||"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"POP"}),(0,i.jsx)("td",{children:":"}),(0,i.jsx)("td",{children:(null===a||void 0===a?void 0:a.pop.pop)||"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"File Laporan"}),(0,i.jsx)("td",{children:":"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:null===a||void 0===a?void 0:a.lampiran_laporan,className:"link link-hover",target:"_blank",rel:"noreferrer",children:"Download file"})})]})]})]})}),(0,i.jsx)("hr",{className:"my-2 mt-10"}),(0,i.jsx)("div",{className:"modal-action justify-center",children:(0,i.jsx)(l.zx,{type:"button",onClick:function(){return c()},children:"Kembali"})})]})})}}}]);
//# sourceMappingURL=429.3cc6558d.chunk.js.map